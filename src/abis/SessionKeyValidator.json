{"abi":[{"type":"constructor","inputs":[{"name":"_account","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"account","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"allowSelector","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"sel","type":"bytes4","internalType":"bytes4"},{"name":"allowed","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"allowTarget","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"target","type":"address","internalType":"address"},{"name":"allowed","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"consumeOrRevert","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"timestamp","type":"uint48","internalType":"uint48"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"getSpendingStatus","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"timestamp","type":"uint48","internalType":"uint48"}],"outputs":[{"name":"cap","type":"uint256","internalType":"uint256"},{"name":"spent","type":"uint256","internalType":"uint256"},{"name":"remaining","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getWindowId","inputs":[{"name":"timestamp","type":"uint48","internalType":"uint48"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"pure"},{"type":"function","name":"grant","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"expiry","type":"uint64","internalType":"uint64"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"isTargetAllowed","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"target","type":"address","internalType":"address"}],"outputs":[{"name":"allowed","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isValidUserOp","inputs":[{"name":"userOpSignature","type":"bytes","internalType":"bytes"},{"name":"userOpHash","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"recordSpending","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"timestamp","type":"uint48","internalType":"uint48"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"revoke","inputs":[{"name":"key","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"selectorAllowed","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"sel","type":"bytes4","internalType":"bytes4"}],"outputs":[{"name":"allowed","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"sessionExpiry","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"uint64","internalType":"uint64"}],"stateMutability":"view"},{"type":"function","name":"sessionKeyData","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"dailyCap","type":"uint256","internalType":"uint256"},{"name":"hasTargetRestrictions","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"setSpendingCap","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"dailyCap","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setTargetRestrictions","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"enabled","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"targetAllowed","inputs":[{"name":"","type":"address","internalType":"address"},{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"windowSpending","inputs":[{"name":"","type":"address","internalType":"address"},{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"wouldExceedCap","inputs":[{"name":"key","type":"address","internalType":"address"},{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"timestamp","type":"uint48","internalType":"uint48"}],"outputs":[{"name":"wouldExceed","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"event","name":"AllowlistViolation","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"},{"name":"target","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"CapConsumed","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"newTotal","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"CapExceeded","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"},{"name":"attempted","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"cap","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"SelectorAllowed","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"},{"name":"sel","type":"bytes4","indexed":true,"internalType":"bytes4"},{"name":"allowed","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},{"type":"event","name":"SessionCapSet","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"},{"name":"dailyCap","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"SessionGranted","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"},{"name":"expiry","type":"uint64","indexed":false,"internalType":"uint64"}],"anonymous":false},{"type":"event","name":"SessionRevoked","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"TargetAllowed","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"},{"name":"target","type":"address","indexed":true,"internalType":"address"},{"name":"allowed","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},{"type":"event","name":"TargetRestrictionsSet","inputs":[{"name":"key","type":"address","indexed":true,"internalType":"address"},{"name":"enabled","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false}],"bytecode":{"object":"0x60a0346100dc57601f61112938819003918201601f19168301916001600160401b038311848410176100e1578084926020946040528339810103126100dc57516001600160a01b0381168082036100dc57156100a85760805260405161103190816100f882396080518181816102dc015281816103f2015281816104a50152818161059801528181610683015281816106e2015281816107ee0152818161091c0152610a010152f35b60405162461bcd60e51b815260206004820152600c60248201526b1e995c9bc81858d8dbdd5b9d60a21b6044820152606490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe608080604052600436101561001357600080fd5b60003560e01c90816305e5fa2f14610a96575080630f3556da14610a365780631711080d146109e957806322d08136146109b55780632a2314c11461098957806338cc7872146108c557806348d6bbca146107b9578063504d496b146106b25780635dab24201461066d5780635e8c18661461061257806374a8f103146105795780637ee1ce1d14610482578063c63a5d86146103aa578063d2b240e114610362578063d8899c0b14610288578063eb038861146101b8578063ed849f551461015c578063f5ced3f6146101185763ff1e9112146100f057600080fd5b3461011357602061010961010336610b09565b91610ed7565b6040519015158152f35b600080fd5b34610113576020366003190112610113576001600160a01b03610139610add565b166000526000602052602067ffffffffffffffff60406000205416604051908152f35b3461011357604036600319011261011357610175610add565b61017d610b51565b9060018060a01b0316600052600160205260406000209063ffffffff60e01b16600052602052602060ff604060002054166040519015158152f35b34610113576040366003190112610113576101d1610add565b6024359065ffffffffffff8216809203610113576001600160a01b0316600081815260026020526040902091620151809061020a610b68565b602060ff60018754978885520154161515910152049060005260036020526040600020906000526020526040600020549081811160001461027d578181039181831161026757606092905b60405192835260208301526040820152f35b634e487b7160e01b600052601160045260246000fd5b606091600090610255565b34610113576060366003190112610113576102a1610add565b6102a9610b51565b907f840b667f87738b9da1db624bc140d21f834cc7842dfc078ecadec9f6ec2c62ca60206102d5610b42565b9261030a337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b03169261031f841515610ea0565b836000526001825260406000209463ffffffff60e01b16948560005282526103578160406000209060ff801983541691151516179055565b6040519015158152a3005b34610113576040366003190112610113576001600160a01b03610383610add565b16600052600360205260406000206024356000526020526020604060002054604051908152f35b3461011357620151807f07d29fe902c19439a8d8fda5b2a81cedb43480fe2ec625cdff236d6b276284ef604065ffffffffffff6103e636610b09565b919590929091610420337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b61042b841515610cb2565b16049360018060a01b03169384600052600360205282600020816000526020528260002061045a838254610cec565b90558460005260036020528260002090600052602052816000205482519182526020820152a2005b346101135760403660031901126101135761049b610add565b602435906104d3337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b0316906104e8821515610ea0565b81600052600060205267ffffffffffffffff60406000205416156105425760207f18a494d71d2c80a6d163dc672af893c91b261f4829067887a8168048b274584291836000526002825280604060002055604051908152a2005b60405162461bcd60e51b815260206004820152600f60248201526e1ad95e481b9bdd0819dc985b9d1959608a1b6044820152606490fd5b3461011357602036600319011261011357610592610add565b6105c6337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b03166000818152602081905260408120805467ffffffffffffffff191690557f2991ab7bfda4556c9e662762b3dfa89a1df391084c4278286d466c1c187e55239080a2005b346101135760403660031901126101135761062b610add565b610633610af3565b9060018060a01b0316600052600460205260406000209060018060a01b0316600052602052602060ff604060002054166040519015158152f35b34610113576000366003190112610113576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b34610113576060366003190112610113576106cb610add565b6106d3610af3565b6106db610b42565b91610710337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b031690610725821515610ea0565b6001600160a01b03169182156107865760207f0f89b9b3f51b332e771731693eb2252fedd0db543f62b3fb654a1e459bec49ad91836000526004825260406000208560005282526103578160406000209060ff801983541691151516179055565b60405162461bcd60e51b815260206004820152600b60248201526a1e995c9bc81d185c99d95d60aa1b6044820152606490fd5b34610113576040366003190112610113576107d2610add565b6024359067ffffffffffffffff82168092036101135761081c337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b031690610831821515610ea0565b603c42018042116102675781111561088e5760207f0912f4d1d98ef9a44becd4b656f606db4d754f9dd9c16167263ea9c491ed155991836000526000825260406000208167ffffffffffffffff19825416179055604051908152a2005b60405162461bcd60e51b815260206004820152600f60248201526e32bc3834b93c903a37b79039b7b7b760891b6044820152606490fd5b34610113576040366003190112610113576108de610add565b6024359081151590818303610113577f3793edc39880f20ce83ae0d7bbb39a32d588e871b68f4f22935128b8d944fff3916020916109809061094a337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b03169461095f861515610ea0565b856000526002845260016040600020019060ff801983541691151516179055565b604051908152a2005b346101135760403660031901126101135760206101096109a7610add565b6109af610af3565b90610e39565b346101135760203660031901126101135760043565ffffffffffff8116809103610113576201518060209104604051908152f35b3461011357610a346109fa36610b09565b91610a2f337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b610cf9565b005b346101135760403660031901126101135760043567ffffffffffffffff8111610113573660238201121561011357806004013567ffffffffffffffff81116101135736602482840101116101135760209161010991602480359201610b9e565b34610113576020366003190112610113576040906001600160a01b03610aba610add565b1660005260026020528160002060ff600182549201541690825215156020820152f35b600435906001600160a01b038216820361011357565b602435906001600160a01b038216820361011357565b6060906003190112610113576004356001600160a01b038116810361011357906024359060443565ffffffffffff811681036101135790565b60443590811515820361011357565b602435906001600160e01b03198216820361011357565b604051906040820182811067ffffffffffffffff821117610b8857604052565b634e487b7160e01b600052604160045260246000fd5b917f19457468657265756d205369676e6564204d6573736167653a0a333200000000600052601c52603c60002067ffffffffffffffff8211610b885760405191601f8101601f19908116603f0116830167ffffffffffffffff811184821017610b8857604052808352368185011161011357602081600092610c27968387013784010152610f53565b506004811015610c6257610c5c576001600160a01b031660009081526020819052604090205467ffffffffffffffff16151590565b50600090565b634e487b7160e01b600052602160045260246000fd5b15610c7f57565b60405162461bcd60e51b815260206004820152600b60248201526a1b9bdd081858d8dbdd5b9d60aa1b6044820152606490fd5b15610cb957565b60405162461bcd60e51b815260206004820152600b60248201526a1e995c9bc8185b5bdd5b9d60aa1b6044820152606490fd5b9190820180921161026757565b610d04821515610cb2565b6001600160a01b031660008181526002602052604090209092610d25610b68565b9160ff60018254928386520154161515602084015215610e335765ffffffffffff62015180911604836000526003602052604060002081600052602052610d7183604060002054610cec565b9151808311610dc85750916040917f07d29fe902c19439a8d8fda5b2a81cedb43480fe2ec625cdff236d6b276284ef93856000526003602052836000209060005260205280836000205582519182526020820152a2565b7fc2373395179af6c39f367d2c3bc2a1001ac3bf9a6b3fea1531486f15ca6bc6d0604085879382519182526020820152a260405162461bcd60e51b815260206004820152601260248201527111185a5b1e4818d85c08195e18d95959195960721b6044820152606490fd5b50505050565b6001600160a01b0316600081815260026020526040902060ff6001610e5c610b68565b9280548452015416159060208215910152610e9957600052600460205260406000209060018060a01b031660005260205260ff6040600020541690565b5050600190565b15610ea757565b60405162461bcd60e51b81526020600482015260086024820152677a65726f206b657960c01b6044820152606490fd5b6001600160a01b03166000818152600260205260409020929190610ef9610b68565b9360ff60018254928388520154161515602086015215610f4a576201518065ffffffffffff610f44941604906000526003602052604060002090600052602052604060002054610cec565b90511090565b50505050600090565b8151919060418303610f8457610f7d92506020820151906060604084015193015160001a90610f8f565b9192909190565b505060009160029190565b91907f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08411611018579160209360809260ff60009560405194855216868401526040830152606082015282805260015afa1561100c576000516001600160a01b038116156110005790600090600090565b50600090600190600090565b6040513d6000823e3d90fd5b5050506000916003919056fea164736f6c634300081e000a","sourceMap":"294:9055:43:-:0;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;-1:-1:-1;;;;;294:9055:43;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;294:9055:43;;;;;;;2116:22;294:9055;;2165:18;;294:9055;;;;;;;;2165:18;294:9055;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;;-1:-1:-1;294:9055:43;;;;;;-1:-1:-1;294:9055:43;;;;;-1:-1:-1;294:9055:43","linkReferences":{}},"deployedBytecode":{"object":"0x608080604052600436101561001357600080fd5b60003560e01c90816305e5fa2f14610a96575080630f3556da14610a365780631711080d146109e957806322d08136146109b55780632a2314c11461098957806338cc7872146108c557806348d6bbca146107b9578063504d496b146106b25780635dab24201461066d5780635e8c18661461061257806374a8f103146105795780637ee1ce1d14610482578063c63a5d86146103aa578063d2b240e114610362578063d8899c0b14610288578063eb038861146101b8578063ed849f551461015c578063f5ced3f6146101185763ff1e9112146100f057600080fd5b3461011357602061010961010336610b09565b91610ed7565b6040519015158152f35b600080fd5b34610113576020366003190112610113576001600160a01b03610139610add565b166000526000602052602067ffffffffffffffff60406000205416604051908152f35b3461011357604036600319011261011357610175610add565b61017d610b51565b9060018060a01b0316600052600160205260406000209063ffffffff60e01b16600052602052602060ff604060002054166040519015158152f35b34610113576040366003190112610113576101d1610add565b6024359065ffffffffffff8216809203610113576001600160a01b0316600081815260026020526040902091620151809061020a610b68565b602060ff60018754978885520154161515910152049060005260036020526040600020906000526020526040600020549081811160001461027d578181039181831161026757606092905b60405192835260208301526040820152f35b634e487b7160e01b600052601160045260246000fd5b606091600090610255565b34610113576060366003190112610113576102a1610add565b6102a9610b51565b907f840b667f87738b9da1db624bc140d21f834cc7842dfc078ecadec9f6ec2c62ca60206102d5610b42565b9261030a337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b03169261031f841515610ea0565b836000526001825260406000209463ffffffff60e01b16948560005282526103578160406000209060ff801983541691151516179055565b6040519015158152a3005b34610113576040366003190112610113576001600160a01b03610383610add565b16600052600360205260406000206024356000526020526020604060002054604051908152f35b3461011357620151807f07d29fe902c19439a8d8fda5b2a81cedb43480fe2ec625cdff236d6b276284ef604065ffffffffffff6103e636610b09565b919590929091610420337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b61042b841515610cb2565b16049360018060a01b03169384600052600360205282600020816000526020528260002061045a838254610cec565b90558460005260036020528260002090600052602052816000205482519182526020820152a2005b346101135760403660031901126101135761049b610add565b602435906104d3337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b0316906104e8821515610ea0565b81600052600060205267ffffffffffffffff60406000205416156105425760207f18a494d71d2c80a6d163dc672af893c91b261f4829067887a8168048b274584291836000526002825280604060002055604051908152a2005b60405162461bcd60e51b815260206004820152600f60248201526e1ad95e481b9bdd0819dc985b9d1959608a1b6044820152606490fd5b3461011357602036600319011261011357610592610add565b6105c6337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b03166000818152602081905260408120805467ffffffffffffffff191690557f2991ab7bfda4556c9e662762b3dfa89a1df391084c4278286d466c1c187e55239080a2005b346101135760403660031901126101135761062b610add565b610633610af3565b9060018060a01b0316600052600460205260406000209060018060a01b0316600052602052602060ff604060002054166040519015158152f35b34610113576000366003190112610113576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b34610113576060366003190112610113576106cb610add565b6106d3610af3565b6106db610b42565b91610710337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b031690610725821515610ea0565b6001600160a01b03169182156107865760207f0f89b9b3f51b332e771731693eb2252fedd0db543f62b3fb654a1e459bec49ad91836000526004825260406000208560005282526103578160406000209060ff801983541691151516179055565b60405162461bcd60e51b815260206004820152600b60248201526a1e995c9bc81d185c99d95d60aa1b6044820152606490fd5b34610113576040366003190112610113576107d2610add565b6024359067ffffffffffffffff82168092036101135761081c337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b031690610831821515610ea0565b603c42018042116102675781111561088e5760207f0912f4d1d98ef9a44becd4b656f606db4d754f9dd9c16167263ea9c491ed155991836000526000825260406000208167ffffffffffffffff19825416179055604051908152a2005b60405162461bcd60e51b815260206004820152600f60248201526e32bc3834b93c903a37b79039b7b7b760891b6044820152606490fd5b34610113576040366003190112610113576108de610add565b6024359081151590818303610113577f3793edc39880f20ce83ae0d7bbb39a32d588e871b68f4f22935128b8d944fff3916020916109809061094a337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b6001600160a01b03169461095f861515610ea0565b856000526002845260016040600020019060ff801983541691151516179055565b604051908152a2005b346101135760403660031901126101135760206101096109a7610add565b6109af610af3565b90610e39565b346101135760203660031901126101135760043565ffffffffffff8116809103610113576201518060209104604051908152f35b3461011357610a346109fa36610b09565b91610a2f337f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031614610c78565b610cf9565b005b346101135760403660031901126101135760043567ffffffffffffffff8111610113573660238201121561011357806004013567ffffffffffffffff81116101135736602482840101116101135760209161010991602480359201610b9e565b34610113576020366003190112610113576040906001600160a01b03610aba610add565b1660005260026020528160002060ff600182549201541690825215156020820152f35b600435906001600160a01b038216820361011357565b602435906001600160a01b038216820361011357565b6060906003190112610113576004356001600160a01b038116810361011357906024359060443565ffffffffffff811681036101135790565b60443590811515820361011357565b602435906001600160e01b03198216820361011357565b604051906040820182811067ffffffffffffffff821117610b8857604052565b634e487b7160e01b600052604160045260246000fd5b917f19457468657265756d205369676e6564204d6573736167653a0a333200000000600052601c52603c60002067ffffffffffffffff8211610b885760405191601f8101601f19908116603f0116830167ffffffffffffffff811184821017610b8857604052808352368185011161011357602081600092610c27968387013784010152610f53565b506004811015610c6257610c5c576001600160a01b031660009081526020819052604090205467ffffffffffffffff16151590565b50600090565b634e487b7160e01b600052602160045260246000fd5b15610c7f57565b60405162461bcd60e51b815260206004820152600b60248201526a1b9bdd081858d8dbdd5b9d60aa1b6044820152606490fd5b15610cb957565b60405162461bcd60e51b815260206004820152600b60248201526a1e995c9bc8185b5bdd5b9d60aa1b6044820152606490fd5b9190820180921161026757565b610d04821515610cb2565b6001600160a01b031660008181526002602052604090209092610d25610b68565b9160ff60018254928386520154161515602084015215610e335765ffffffffffff62015180911604836000526003602052604060002081600052602052610d7183604060002054610cec565b9151808311610dc85750916040917f07d29fe902c19439a8d8fda5b2a81cedb43480fe2ec625cdff236d6b276284ef93856000526003602052836000209060005260205280836000205582519182526020820152a2565b7fc2373395179af6c39f367d2c3bc2a1001ac3bf9a6b3fea1531486f15ca6bc6d0604085879382519182526020820152a260405162461bcd60e51b815260206004820152601260248201527111185a5b1e4818d85c08195e18d95959195960721b6044820152606490fd5b50505050565b6001600160a01b0316600081815260026020526040902060ff6001610e5c610b68565b9280548452015416159060208215910152610e9957600052600460205260406000209060018060a01b031660005260205260ff6040600020541690565b5050600190565b15610ea757565b60405162461bcd60e51b81526020600482015260086024820152677a65726f206b657960c01b6044820152606490fd5b6001600160a01b03166000818152600260205260409020929190610ef9610b68565b9360ff60018254928388520154161515602086015215610f4a576201518065ffffffffffff610f44941604906000526003602052604060002090600052602052604060002054610cec565b90511090565b50505050600090565b8151919060418303610f8457610f7d92506020820151906060604084015193015160001a90610f8f565b9192909190565b505060009160029190565b91907f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08411611018579160209360809260ff60009560405194855216868401526040830152606082015282805260015afa1561100c576000516001600160a01b038116156110005790600090600090565b50600090600190600090565b6040513d6000823e3d90fd5b5050506000916003919056fea164736f6c634300081e000a","sourceMap":"294:9055:43:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;:::i;:::-;;;;;;;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;-1:-1:-1;;;;;294:9055:43;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;;;:::i;:::-;;;;;;;;;;513:82;294:9055;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;;;;;;;;;;;;-1:-1:-1;;;;;294:9055:43;;;;;9125:14;294:9055;;;;;;5456:6;;294:9055;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;9251:14;294:9055;;;;;;;;;;;;;;9311:29;:11;;;:29;:11;;;294:9055;;;;;;;;;;9311:29;;;294:9055;;;;;;;;;;;;;;;;;;;;;;;;;;9311:29;294:9055;9311:29;294:9055;9311:29;;;294:9055;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;;;:::i;:::-;;2880:34;294:9055;;;:::i;:::-;;1999:45;2007:10;2021:7;-1:-1:-1;;;;;294:9055:43;2007:21;1999:45;:::i;:::-;-1:-1:-1;;;;;294:9055:43;;2782:38;2790:17;;;2782:38;:::i;:::-;294:9055;;;2830:15;294:9055;;;;;;;;;;;;;;;;2830:35;294:9055;;;;;;;;;;;;;;;;;;;2830:35;294:9055;;;;;;;2880:34;294:9055;;;;;;;-1:-1:-1;;294:9055:43;;;;-1:-1:-1;;;;;294:9055:43;;:::i;:::-;;;;1031:69;294:9055;;;;;;;;;;;;;;;;;;;;;;;;;;5456:6;8497:55;294:9055;;;;;:::i;:::-;;;;;;;1999:45;2007:10;2021:7;-1:-1:-1;;;;;294:9055:43;2007:21;1999:45;:::i;:::-;8330:34;8338:10;;;8330:34;:::i;:::-;294:9055;;;;;;;;;;;;;8434:14;294:9055;;;;;;;;;;;;;8434:39;294:9055;;;8434:39;:::i;:::-;294:9055;;;;;8434:14;294:9055;;;;;;;;;;;;;;;;;;;;;;;8497:55;294:9055;;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;;;;1999:45;2007:10;2021:7;-1:-1:-1;;;;;294:9055:43;2007:21;1999:45;:::i;:::-;-1:-1:-1;;;;;294:9055:43;;3822:38;3830:17;;;3822:38;:::i;:::-;294:9055;;;;;;;;;;;;3878:22;294:9055;;;3993:28;294:9055;;;;3939:14;294:9055;;;;;;;;;;;;3993:28;294:9055;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;1999:45;2007:10;2021:7;-1:-1:-1;;;;;294:9055:43;2007:21;1999:45;:::i;:::-;-1:-1:-1;;;;;294:9055:43;;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;2657:19;;294:9055;2657:19;294:9055;;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;;;:::i;:::-;;;;;;;;;;;;;;;;1162:65;294:9055;;;;;;-1:-1:-1;294:9055:43;;;;;;-1:-1:-1;294:9055:43;;;;;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;;;422:32;-1:-1:-1;;;;;294:9055:43;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;;;:::i;:::-;;;:::i;:::-;;1999:45;2007:10;2021:7;-1:-1:-1;;;;;294:9055:43;2007:21;1999:45;:::i;:::-;-1:-1:-1;;;;;294:9055:43;;4795:38;4803:17;;;4795:38;:::i;:::-;-1:-1:-1;;;;;294:9055:43;;4851:20;;294:9055;;;4957:35;294:9055;;;;;;;;;;;-1:-1:-1;294:9055:43;;;4906:36;294:9055;;-1:-1:-1;294:9055:43;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;;;;;;;;;;;;1999:45;2007:10;2021:7;-1:-1:-1;;;;;294:9055:43;2007:21;1999:45;:::i;:::-;-1:-1:-1;;;;;294:9055:43;;2270:38;2278:17;;;2270:38;:::i;:::-;2434:2;2416:15;294:9055;2416:15;;294:9055;;;2407:29;;294:9055;;;;2517:27;294:9055;;;;;;;;;;;;;;;;;;;;;;;;2517:27;294:9055;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;;;:::i;:::-;;;;;;;;;;;;;4429:35;;294:9055;;4363:51;;1999:45;2007:10;2021:7;-1:-1:-1;;;;;294:9055:43;2007:21;1999:45;:::i;:::-;-1:-1:-1;;;;;294:9055:43;;4315:38;4323:17;;;4315:38;:::i;:::-;294:9055;;;4363:14;294:9055;;4363:41;294:9055;;;4363:41;294:9055;;;;;;;;;;;;;;;4363:51;294:9055;;;;;4429:35;294:9055;;;;;;;-1:-1:-1;;294:9055:43;;;;;;;;:::i;:::-;;;:::i;:::-;;;:::i;:::-;;;;;;-1:-1:-1;;294:9055:43;;;;;;;;;;;;;;5456:6;294:9055;;;;;;;;;;;;;2054:1;294:9055;;;:::i;:::-;;1999:45;2007:10;2021:7;-1:-1:-1;;;;;294:9055:43;2007:21;1999:45;:::i;:::-;2054:1;:::i;:::-;294:9055;;;;;;;-1:-1:-1;;294:9055:43;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;-1:-1:-1;;294:9055:43;;;;;;-1:-1:-1;;;;;294:9055:43;;:::i;:::-;;;;879:56;294:9055;;;;;;879:56;294:9055;;879:56;;294:9055;;;;;;;;;;;;;;;;-1:-1:-1;;;;;294:9055:43;;;;;;:::o;:::-;;;;-1:-1:-1;;;;;294:9055:43;;;;;;:::o;:::-;;;;;;;;;;;-1:-1:-1;;;;;294:9055:43;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;:::o;:::-;;;;-1:-1:-1;;;;;;294:9055:43;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;:::o;:::-;;;;-1:-1:-1;294:9055:43;;;;;-1:-1:-1;294:9055:43;2927:536;;1324:325:24;294:9055:43;1324:325:24;;;;294:9055:43;1324:325:24;294:9055:43;;;;;;;;;;;-1:-1:-1;;294:9055:43;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3179:63;294:9055;;;;;;;;;3179:63;:::i;:::-;294:9055;;;;;;;3252:51;;-1:-1:-1;;;;;294:9055:43;;;;;;;;;;;;;;;3448:8;;;2927:536::o;3252:51::-;3291:12;294:9055;3291:12;:::o;294:9055::-;;;;;;;;;;;;;;;;:::o;:::-;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;:::o;:::-;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;;;;;;:::o;7125:798::-;7228:34;7236:10;;;7228:34;:::i;:::-;-1:-1:-1;;;;;294:9055:43;7245:1;294:9055;;;7310:14;294:9055;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;7343:18;7339:31;;294:9055;5456:6;7421:22;294:9055;;;7245:1;294:9055;7476:14;294:9055;;;7245:1;294:9055;;7245:1;294:9055;;;7534:21;294:9055;;7245:1;294:9055;;7534:21;:::i;:::-;294:9055;;7634:24;;;7630:141;;294:9055;;;;7882:34;294:9055;;7245:1;294:9055;7476:14;294:9055;;;7245:1;294:9055;;7245:1;294:9055;;;;;7245:1;294:9055;;;;;;;;;;;7882:34;7125:798::o;7630:141::-;7679:39;294:9055;;;;;;;;;;;;;7679:39;294:9055;;-1:-1:-1;;;7732:28:43;;294:9055;7732:28;;;294:9055;;;;;;-1:-1:-1;;;294:9055:43;;;;7732:28;;;7339:31;7363:7;;;;:::o;6440:262::-;-1:-1:-1;;;;;294:9055:43;;;;;6570:14;294:9055;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;6599:44;;294:9055;;6669:13;294:9055;;;;;6669:26;294:9055;;;;;;-1:-1:-1;294:9055:43;;;;;-1:-1:-1;294:9055:43;;;6440:262;:::o;6599:44::-;6632:11;;294:9055;6632:11;:::o;294:9055::-;;;;:::o;:::-;;;-1:-1:-1;;;294:9055:43;;;;;;;;;;;;-1:-1:-1;;;294:9055:43;;;;;;;5768:438;-1:-1:-1;;;;;294:9055:43;;;;;5933:14;294:9055;;;;;;5768:438;;294:9055;;:::i;:::-;;;;;;;;;;;;;;;;;;;5966:18;5962:36;;5456:6;294:9055;6161:21;6050:22;294:9055;;;;;6105:14;294:9055;;;;;;;;;;;;;;6161:21;:::i;:::-;294:9055;;-1:-1:-1;5768:438:43;:::o;5962:36::-;5986:12;;;;294:9055;5986:12;:::o;2129:778:23:-;294:9055:43;;;2129:778:23;2319:2;2299:22;;2319:2;;2751:25;2535:196;;;;;;;;;;;;;;;-1:-1:-1;2535:196:23;2751:25;;:::i;:::-;2744:32;;;;;:::o;2295:606::-;2807:83;;2823:1;2807:83;2827:35;2807:83;;:::o;5203:1551::-;;;6283:66;6270:79;;6266:164;;294:9055:43;;;;;;-1:-1:-1;294:9055:43;;;;;;;;;;;;;;;;;;;6541:24:23;;;;;;;;;-1:-1:-1;6541:24:23;-1:-1:-1;;;;;294:9055:43;;6579:20:23;6575:113;;6698:49;-1:-1:-1;6698:49:23;-1:-1:-1;5203:1551:23;:::o;6575:113::-;6615:62;-1:-1:-1;6615:62:23;6541:24;6615:62;-1:-1:-1;6615:62:23;:::o;6541:24::-;294:9055:43;;;-1:-1:-1;294:9055:43;;;;;6266:164:23;6365:54;;;6381:1;6365:54;6385:30;6365:54;;:::o","linkReferences":{},"immutableReferences":{"51075":[{"start":732,"length":32},{"start":1010,"length":32},{"start":1189,"length":32},{"start":1432,"length":32},{"start":1667,"length":32},{"start":1762,"length":32},{"start":2030,"length":32},{"start":2332,"length":32},{"start":2561,"length":32}]}},"methodIdentifiers":{"account()":"5dab2420","allowSelector(address,bytes4,bool)":"d8899c0b","allowTarget(address,address,bool)":"504d496b","consumeOrRevert(address,uint256,uint48)":"1711080d","getSpendingStatus(address,uint48)":"eb038861","getWindowId(uint48)":"22d08136","grant(address,uint64)":"48d6bbca","isTargetAllowed(address,address)":"2a2314c1","isValidUserOp(bytes,bytes32)":"0f3556da","recordSpending(address,uint256,uint48)":"c63a5d86","revoke(address)":"74a8f103","selectorAllowed(address,bytes4)":"ed849f55","sessionExpiry(address)":"f5ced3f6","sessionKeyData(address)":"05e5fa2f","setSpendingCap(address,uint256)":"7ee1ce1d","setTargetRestrictions(address,bool)":"38cc7872","targetAllowed(address,address)":"5e8c1866","windowSpending(address,uint256)":"d2b240e1","wouldExceedCap(address,uint256,uint48)":"ff1e9112"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"AllowlistViolation\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newTotal\",\"type\":\"uint256\"}],\"name\":\"CapConsumed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"attempted\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"cap\",\"type\":\"uint256\"}],\"name\":\"CapExceeded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes4\",\"name\":\"sel\",\"type\":\"bytes4\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"}],\"name\":\"SelectorAllowed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"dailyCap\",\"type\":\"uint256\"}],\"name\":\"SessionCapSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"expiry\",\"type\":\"uint64\"}],\"name\":\"SessionGranted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"}],\"name\":\"SessionRevoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"}],\"name\":\"TargetAllowed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"enabled\",\"type\":\"bool\"}],\"name\":\"TargetRestrictionsSet\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"account\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"bytes4\",\"name\":\"sel\",\"type\":\"bytes4\"},{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"}],\"name\":\"allowSelector\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"}],\"name\":\"allowTarget\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint48\",\"name\":\"timestamp\",\"type\":\"uint48\"}],\"name\":\"consumeOrRevert\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"uint48\",\"name\":\"timestamp\",\"type\":\"uint48\"}],\"name\":\"getSpendingStatus\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"cap\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"spent\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"remaining\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint48\",\"name\":\"timestamp\",\"type\":\"uint48\"}],\"name\":\"getWindowId\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"uint64\",\"name\":\"expiry\",\"type\":\"uint64\"}],\"name\":\"grant\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"isTargetAllowed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"userOpSignature\",\"type\":\"bytes\"},{\"internalType\":\"bytes32\",\"name\":\"userOpHash\",\"type\":\"bytes32\"}],\"name\":\"isValidUserOp\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint48\",\"name\":\"timestamp\",\"type\":\"uint48\"}],\"name\":\"recordSpending\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"}],\"name\":\"revoke\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"bytes4\",\"name\":\"sel\",\"type\":\"bytes4\"}],\"name\":\"selectorAllowed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"sessionExpiry\",\"outputs\":[{\"internalType\":\"uint64\",\"name\":\"\",\"type\":\"uint64\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"sessionKeyData\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"dailyCap\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"hasTargetRestrictions\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"dailyCap\",\"type\":\"uint256\"}],\"name\":\"setSpendingCap\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"enabled\",\"type\":\"bool\"}],\"name\":\"setTargetRestrictions\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"targetAllowed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"windowSpending\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"key\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint48\",\"name\":\"timestamp\",\"type\":\"uint48\"}],\"name\":\"wouldExceedCap\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"wouldExceed\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"allowTarget(address,address,bool)\":{\"params\":{\"allowed\":\"Whether the target is allowed\",\"key\":\"Session key address\",\"target\":\"Target contract address\"}},\"consumeOrRevert(address,uint256,uint48)\":{\"details\":\"Reverts if cap would be exceeded, otherwise atomically updates state\",\"params\":{\"amount\":\"Amount to consume\",\"key\":\"Session key address (explicitly passed from callData)\",\"timestamp\":\"Timestamp for window calculation\"}},\"getSpendingStatus(address,uint48)\":{\"params\":{\"key\":\"Session key address\",\"timestamp\":\"Timestamp for window calculation\"},\"returns\":{\"cap\":\"Daily spending cap\",\"remaining\":\"Amount remaining in window\",\"spent\":\"Amount spent in current window\"}},\"getWindowId(uint48)\":{\"params\":{\"timestamp\":\"Timestamp for window calculation (from UserOp or current time)\"},\"returns\":{\"_0\":\"windowId Deterministic window identifier\"}},\"isTargetAllowed(address,address)\":{\"params\":{\"key\":\"Session key address\",\"target\":\"Target address to check\"},\"returns\":{\"allowed\":\"Whether the target is allowed\"}},\"recordSpending(address,uint256,uint48)\":{\"details\":\"Legacy function for backward compatibility\",\"params\":{\"amount\":\"Amount spent\",\"key\":\"Session key that spent\",\"timestamp\":\"Timestamp for window calculation\"}},\"setSpendingCap(address,uint256)\":{\"params\":{\"dailyCap\":\"Maximum amount the key can spend per day (0 = no cap)\",\"key\":\"Session key address\"}},\"setTargetRestrictions(address,bool)\":{\"params\":{\"enabled\":\"If true, only allowed targets can be called\",\"key\":\"Session key address\"}},\"wouldExceedCap(address,uint256,uint48)\":{\"params\":{\"amount\":\"Amount to spend\",\"key\":\"Session key address\",\"timestamp\":\"Timestamp for window calculation\"},\"returns\":{\"wouldExceed\":\"True if spending would exceed cap\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"allowTarget(address,address,bool)\":{\"notice\":\"Allow or disallow a target address for a session key\"},\"consumeOrRevert(address,uint256,uint48)\":{\"notice\":\"AUDITOR REQUIRED: Atomic check-and-consume spending cap\"},\"getSpendingStatus(address,uint48)\":{\"notice\":\"Get spending status for a session key\"},\"getWindowId(uint48)\":{\"notice\":\"AUDITOR APPROVED: Calculate deterministic window ID from timestamp\"},\"isTargetAllowed(address,address)\":{\"notice\":\"AUDITOR APPROVED: Check if target is allowed (view only)\"},\"recordSpending(address,uint256,uint48)\":{\"notice\":\"AUDITOR APPROVED: Record spending (called from SmartAccount after execution)\"},\"setSpendingCap(address,uint256)\":{\"notice\":\"Set daily spending cap for a session key\"},\"setTargetRestrictions(address,bool)\":{\"notice\":\"Enable/disable target restrictions for a session key\"},\"wouldExceedCap(address,uint256,uint48)\":{\"notice\":\"AUDITOR APPROVED: Check if spending would exceed cap (view only)\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/validators/SessionKeyValidator.sol\":\"SessionKeyValidator\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/contracts/\"],\"viaIR\":true},\"sources\":{\"lib/openzeppelin-contracts/contracts/utils/Panic.sol\":{\"keccak256\":\"0xf7fe324703a64fc51702311dc51562d5cb1497734f074e4f483bfb6717572d7a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c6a5ff4f9fd8649b7ee20800b7fa387d3465bd77cf20c2d1068cd5c98e1ed57a\",\"dweb:/ipfs/QmVSaVJf9FXFhdYEYeCEfjMVHrxDh5qL4CGkxdMWpQCrqG\"]},\"lib/openzeppelin-contracts/contracts/utils/Strings.sol\":{\"keccak256\":\"0x44f87e91783e88415bde66f1a63f6c7f0076f2d511548820407d5c95643ac56c\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://13a51bc2b23827744dcf5bad10c69e72528cf015a6fe48c93632cdb2c0eb1251\",\"dweb:/ipfs/QmZwPA47Yqgje1qtkdEFEja8ntTahMStYzKf5q3JRnaR7d\"]},\"lib/openzeppelin-contracts/contracts/utils/cryptography/ECDSA.sol\":{\"keccak256\":\"0x69f54c02b7d81d505910ec198c11ed4c6a728418a868b906b4a0cf29946fda84\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8e25e4bdb7ae1f21d23bfee996e22736fc0ab44cfabedac82a757b1edc5623b9\",\"dweb:/ipfs/QmQdWQvB6JCP9ZMbzi8EvQ1PTETqkcTWrbcVurS7DKpa5n\"]},\"lib/openzeppelin-contracts/contracts/utils/cryptography/MessageHashUtils.sol\":{\"keccak256\":\"0x4515543bc4c78561f6bea83ecfdfc3dead55bd59858287d682045b11de1ae575\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://60601f91440125727244fffd2ba84da7caafecaae0fd887c7ccfec678e02b61e\",\"dweb:/ipfs/QmZnKPBtVDiQS9Dp8gZ4sa3ZeTrWVfqF7yuUd6Y8hwm1Rs\"]},\"lib/openzeppelin-contracts/contracts/utils/math/Math.sol\":{\"keccak256\":\"0xa00be322d7db5786750ce0ac7e2f5b633ac30a5ed5fa1ced1e74acfc19acecea\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6c84e822f87cbdc4082533b626667b6928715bb2b1e8e7eb96954cebb9e38c8d\",\"dweb:/ipfs/QmZmy9dgxLTerBAQDuuHqbL6EpgRxddqgv5KmwpXYVbKz1\"]},\"lib/openzeppelin-contracts/contracts/utils/math/SafeCast.sol\":{\"keccak256\":\"0x195533c86d0ef72bcc06456a4f66a9b941f38eb403739b00f21fd7c1abd1ae54\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b1d578337048cad08c1c03041cca5978eff5428aa130c781b271ad9e5566e1f8\",\"dweb:/ipfs/QmPFKL2r9CBsMwmUqqdcFPfHZB2qcs9g1HDrPxzWSxomvy\"]},\"lib/openzeppelin-contracts/contracts/utils/math/SignedMath.sol\":{\"keccak256\":\"0xb1970fac7b64e6c09611e6691791e848d5e3fe410fa5899e7df2e0afd77a99e3\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://db5fbb3dddd8b7047465b62575d96231ba8a2774d37fb4737fbf23340fabbb03\",\"dweb:/ipfs/QmVUSvooZKEdEdap619tcJjTLcAuH6QBdZqAzWwnAXZAWJ\"]},\"src/validators/ISignatureValidator.sol\":{\"keccak256\":\"0xede25d58cfe5da8ac57d27a114350b1c413dcde5ed7ed8d6a3d6212b7862d401\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://13db44c892702a661cfeaf799288d97f82d108349be605204154d86391d16e13\",\"dweb:/ipfs/QmR9tHFXSUU6mgJG9kddppwcoY9BBRjX9UfcMSJmSVFXTH\"]},\"src/validators/SessionKeyValidator.sol\":{\"keccak256\":\"0x9353b924565042ff947c82a541631491138fd5c0e6f36fb7ae9e18c7eecb6b78\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a28b9b7043b006d5ad1ad3ba15abafd09b9814e70ac3ed31d04ca85b26fd6696\",\"dweb:/ipfs/QmNRf5nih5HpLfNt17CJEtQcqafyDpVvviJFnVDqwfwYz4\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.30+commit.73712a01"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true},{"internalType":"address","name":"target","type":"address","indexed":true}],"type":"event","name":"AllowlistViolation","anonymous":false},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false},{"internalType":"uint256","name":"newTotal","type":"uint256","indexed":false}],"type":"event","name":"CapConsumed","anonymous":false},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true},{"internalType":"uint256","name":"attempted","type":"uint256","indexed":false},{"internalType":"uint256","name":"cap","type":"uint256","indexed":false}],"type":"event","name":"CapExceeded","anonymous":false},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true},{"internalType":"bytes4","name":"sel","type":"bytes4","indexed":true},{"internalType":"bool","name":"allowed","type":"bool","indexed":false}],"type":"event","name":"SelectorAllowed","anonymous":false},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true},{"internalType":"uint256","name":"dailyCap","type":"uint256","indexed":false}],"type":"event","name":"SessionCapSet","anonymous":false},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true},{"internalType":"uint64","name":"expiry","type":"uint64","indexed":false}],"type":"event","name":"SessionGranted","anonymous":false},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true}],"type":"event","name":"SessionRevoked","anonymous":false},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true},{"internalType":"address","name":"target","type":"address","indexed":true},{"internalType":"bool","name":"allowed","type":"bool","indexed":false}],"type":"event","name":"TargetAllowed","anonymous":false},{"inputs":[{"internalType":"address","name":"key","type":"address","indexed":true},{"internalType":"bool","name":"enabled","type":"bool","indexed":false}],"type":"event","name":"TargetRestrictionsSet","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"account","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"bytes4","name":"sel","type":"bytes4"},{"internalType":"bool","name":"allowed","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"allowSelector"},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"address","name":"target","type":"address"},{"internalType":"bool","name":"allowed","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"allowTarget"},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint48","name":"timestamp","type":"uint48"}],"stateMutability":"nonpayable","type":"function","name":"consumeOrRevert"},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"uint48","name":"timestamp","type":"uint48"}],"stateMutability":"view","type":"function","name":"getSpendingStatus","outputs":[{"internalType":"uint256","name":"cap","type":"uint256"},{"internalType":"uint256","name":"spent","type":"uint256"},{"internalType":"uint256","name":"remaining","type":"uint256"}]},{"inputs":[{"internalType":"uint48","name":"timestamp","type":"uint48"}],"stateMutability":"pure","type":"function","name":"getWindowId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"uint64","name":"expiry","type":"uint64"}],"stateMutability":"nonpayable","type":"function","name":"grant"},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"address","name":"target","type":"address"}],"stateMutability":"view","type":"function","name":"isTargetAllowed","outputs":[{"internalType":"bool","name":"allowed","type":"bool"}]},{"inputs":[{"internalType":"bytes","name":"userOpSignature","type":"bytes"},{"internalType":"bytes32","name":"userOpHash","type":"bytes32"}],"stateMutability":"view","type":"function","name":"isValidUserOp","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint48","name":"timestamp","type":"uint48"}],"stateMutability":"nonpayable","type":"function","name":"recordSpending"},{"inputs":[{"internalType":"address","name":"key","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"revoke"},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"bytes4","name":"sel","type":"bytes4"}],"stateMutability":"view","type":"function","name":"selectorAllowed","outputs":[{"internalType":"bool","name":"allowed","type":"bool"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"sessionExpiry","outputs":[{"internalType":"uint64","name":"","type":"uint64"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"sessionKeyData","outputs":[{"internalType":"uint256","name":"dailyCap","type":"uint256"},{"internalType":"bool","name":"hasTargetRestrictions","type":"bool"}]},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"uint256","name":"dailyCap","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setSpendingCap"},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"bool","name":"enabled","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"setTargetRestrictions"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"targetAllowed","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","name":"windowSpending","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"key","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint48","name":"timestamp","type":"uint48"}],"stateMutability":"view","type":"function","name":"wouldExceedCap","outputs":[{"internalType":"bool","name":"wouldExceed","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{"allowTarget(address,address,bool)":{"params":{"allowed":"Whether the target is allowed","key":"Session key address","target":"Target contract address"}},"consumeOrRevert(address,uint256,uint48)":{"details":"Reverts if cap would be exceeded, otherwise atomically updates state","params":{"amount":"Amount to consume","key":"Session key address (explicitly passed from callData)","timestamp":"Timestamp for window calculation"}},"getSpendingStatus(address,uint48)":{"params":{"key":"Session key address","timestamp":"Timestamp for window calculation"},"returns":{"cap":"Daily spending cap","remaining":"Amount remaining in window","spent":"Amount spent in current window"}},"getWindowId(uint48)":{"params":{"timestamp":"Timestamp for window calculation (from UserOp or current time)"},"returns":{"_0":"windowId Deterministic window identifier"}},"isTargetAllowed(address,address)":{"params":{"key":"Session key address","target":"Target address to check"},"returns":{"allowed":"Whether the target is allowed"}},"recordSpending(address,uint256,uint48)":{"details":"Legacy function for backward compatibility","params":{"amount":"Amount spent","key":"Session key that spent","timestamp":"Timestamp for window calculation"}},"setSpendingCap(address,uint256)":{"params":{"dailyCap":"Maximum amount the key can spend per day (0 = no cap)","key":"Session key address"}},"setTargetRestrictions(address,bool)":{"params":{"enabled":"If true, only allowed targets can be called","key":"Session key address"}},"wouldExceedCap(address,uint256,uint48)":{"params":{"amount":"Amount to spend","key":"Session key address","timestamp":"Timestamp for window calculation"},"returns":{"wouldExceed":"True if spending would exceed cap"}}},"version":1},"userdoc":{"kind":"user","methods":{"allowTarget(address,address,bool)":{"notice":"Allow or disallow a target address for a session key"},"consumeOrRevert(address,uint256,uint48)":{"notice":"AUDITOR REQUIRED: Atomic check-and-consume spending cap"},"getSpendingStatus(address,uint48)":{"notice":"Get spending status for a session key"},"getWindowId(uint48)":{"notice":"AUDITOR APPROVED: Calculate deterministic window ID from timestamp"},"isTargetAllowed(address,address)":{"notice":"AUDITOR APPROVED: Check if target is allowed (view only)"},"recordSpending(address,uint256,uint48)":{"notice":"AUDITOR APPROVED: Record spending (called from SmartAccount after execution)"},"setSpendingCap(address,uint256)":{"notice":"Set daily spending cap for a session key"},"setTargetRestrictions(address,bool)":{"notice":"Enable/disable target restrictions for a session key"},"wouldExceedCap(address,uint256,uint48)":{"notice":"AUDITOR APPROVED: Check if spending would exceed cap (view only)"}},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"none"},"compilationTarget":{"src/validators/SessionKeyValidator.sol":"SessionKeyValidator"},"evmVersion":"paris","libraries":{},"viaIR":true},"sources":{"lib/openzeppelin-contracts/contracts/utils/Panic.sol":{"keccak256":"0xf7fe324703a64fc51702311dc51562d5cb1497734f074e4f483bfb6717572d7a","urls":["bzz-raw://c6a5ff4f9fd8649b7ee20800b7fa387d3465bd77cf20c2d1068cd5c98e1ed57a","dweb:/ipfs/QmVSaVJf9FXFhdYEYeCEfjMVHrxDh5qL4CGkxdMWpQCrqG"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Strings.sol":{"keccak256":"0x44f87e91783e88415bde66f1a63f6c7f0076f2d511548820407d5c95643ac56c","urls":["bzz-raw://13a51bc2b23827744dcf5bad10c69e72528cf015a6fe48c93632cdb2c0eb1251","dweb:/ipfs/QmZwPA47Yqgje1qtkdEFEja8ntTahMStYzKf5q3JRnaR7d"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/cryptography/ECDSA.sol":{"keccak256":"0x69f54c02b7d81d505910ec198c11ed4c6a728418a868b906b4a0cf29946fda84","urls":["bzz-raw://8e25e4bdb7ae1f21d23bfee996e22736fc0ab44cfabedac82a757b1edc5623b9","dweb:/ipfs/QmQdWQvB6JCP9ZMbzi8EvQ1PTETqkcTWrbcVurS7DKpa5n"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/cryptography/MessageHashUtils.sol":{"keccak256":"0x4515543bc4c78561f6bea83ecfdfc3dead55bd59858287d682045b11de1ae575","urls":["bzz-raw://60601f91440125727244fffd2ba84da7caafecaae0fd887c7ccfec678e02b61e","dweb:/ipfs/QmZnKPBtVDiQS9Dp8gZ4sa3ZeTrWVfqF7yuUd6Y8hwm1Rs"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/math/Math.sol":{"keccak256":"0xa00be322d7db5786750ce0ac7e2f5b633ac30a5ed5fa1ced1e74acfc19acecea","urls":["bzz-raw://6c84e822f87cbdc4082533b626667b6928715bb2b1e8e7eb96954cebb9e38c8d","dweb:/ipfs/QmZmy9dgxLTerBAQDuuHqbL6EpgRxddqgv5KmwpXYVbKz1"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/math/SafeCast.sol":{"keccak256":"0x195533c86d0ef72bcc06456a4f66a9b941f38eb403739b00f21fd7c1abd1ae54","urls":["bzz-raw://b1d578337048cad08c1c03041cca5978eff5428aa130c781b271ad9e5566e1f8","dweb:/ipfs/QmPFKL2r9CBsMwmUqqdcFPfHZB2qcs9g1HDrPxzWSxomvy"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/math/SignedMath.sol":{"keccak256":"0xb1970fac7b64e6c09611e6691791e848d5e3fe410fa5899e7df2e0afd77a99e3","urls":["bzz-raw://db5fbb3dddd8b7047465b62575d96231ba8a2774d37fb4737fbf23340fabbb03","dweb:/ipfs/QmVUSvooZKEdEdap619tcJjTLcAuH6QBdZqAzWwnAXZAWJ"],"license":"MIT"},"src/validators/ISignatureValidator.sol":{"keccak256":"0xede25d58cfe5da8ac57d27a114350b1c413dcde5ed7ed8d6a3d6212b7862d401","urls":["bzz-raw://13db44c892702a661cfeaf799288d97f82d108349be605204154d86391d16e13","dweb:/ipfs/QmR9tHFXSUU6mgJG9kddppwcoY9BBRjX9UfcMSJmSVFXTH"],"license":"MIT"},"src/validators/SessionKeyValidator.sol":{"keccak256":"0x9353b924565042ff947c82a541631491138fd5c0e6f36fb7ae9e18c7eecb6b78","urls":["bzz-raw://a28b9b7043b006d5ad1ad3ba15abafd09b9814e70ac3ed31d04ca85b26fd6696","dweb:/ipfs/QmNRf5nih5HpLfNt17CJEtQcqafyDpVvviJFnVDqwfwYz4"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"src/validators/SessionKeyValidator.sol","id":51733,"exportedSymbols":{"ECDSA":[41367],"ISignatureValidator":[51057],"MessageHashUtils":[41441],"SessionKeyValidator":[51732]},"nodeType":"SourceUnit","src":"32:9317:43","nodes":[{"id":51059,"nodeType":"PragmaDirective","src":"32:24:43","nodes":[],"literals":["solidity","^","0.8",".30"]},{"id":51061,"nodeType":"ImportDirective","src":"58:62:43","nodes":[],"absolutePath":"src/validators/ISignatureValidator.sol","file":"./ISignatureValidator.sol","nameLocation":"-1:-1:-1","scope":51733,"sourceUnit":51058,"symbolAliases":[{"foreign":{"id":51060,"name":"ISignatureValidator","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51057,"src":"66:19:43","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":51063,"nodeType":"ImportDirective","src":"121:74:43","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/utils/cryptography/ECDSA.sol","file":"openzeppelin-contracts/utils/cryptography/ECDSA.sol","nameLocation":"-1:-1:-1","scope":51733,"sourceUnit":41368,"symbolAliases":[{"foreign":{"id":51062,"name":"ECDSA","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41367,"src":"129:5:43","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":51065,"nodeType":"ImportDirective","src":"196:96:43","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/utils/cryptography/MessageHashUtils.sol","file":"openzeppelin-contracts/utils/cryptography/MessageHashUtils.sol","nameLocation":"-1:-1:-1","scope":51733,"sourceUnit":41442,"symbolAliases":[{"foreign":{"id":51064,"name":"MessageHashUtils","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41441,"src":"204:16:43","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":51732,"nodeType":"ContractDefinition","src":"294:9055:43","nodes":[{"id":51070,"nodeType":"UsingForDirective","src":"352:24:43","nodes":[],"global":false,"libraryName":{"id":51068,"name":"ECDSA","nameLocations":["358:5:43"],"nodeType":"IdentifierPath","referencedDeclaration":41367,"src":"358:5:43"},"typeName":{"id":51069,"name":"bytes32","nodeType":"ElementaryTypeName","src":"368:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":51073,"nodeType":"UsingForDirective","src":"381:35:43","nodes":[],"global":false,"libraryName":{"id":51071,"name":"MessageHashUtils","nameLocations":["387:16:43"],"nodeType":"IdentifierPath","referencedDeclaration":41441,"src":"387:16:43"},"typeName":{"id":51072,"name":"bytes32","nodeType":"ElementaryTypeName","src":"408:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":51075,"nodeType":"VariableDeclaration","src":"422:32:43","nodes":[],"constant":false,"functionSelector":"5dab2420","mutability":"immutable","name":"account","nameLocation":"447:7:43","scope":51732,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51074,"name":"address","nodeType":"ElementaryTypeName","src":"422:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":51079,"nodeType":"VariableDeclaration","src":"460:47:43","nodes":[],"constant":false,"functionSelector":"f5ced3f6","mutability":"mutable","name":"sessionExpiry","nameLocation":"494:13:43","scope":51732,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint64_$","typeString":"mapping(address => uint64)"},"typeName":{"id":51078,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":51076,"name":"address","nodeType":"ElementaryTypeName","src":"468:7:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"460:26:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint64_$","typeString":"mapping(address => uint64)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":51077,"name":"uint64","nodeType":"ElementaryTypeName","src":"479:6:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}},"visibility":"public"},{"id":51085,"nodeType":"VariableDeclaration","src":"513:82:43","nodes":[],"constant":false,"functionSelector":"ed849f55","mutability":"mutable","name":"selectorAllowed","nameLocation":"580:15:43","scope":51732,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_bytes4_$_t_bool_$_$","typeString":"mapping(address => mapping(bytes4 => bool))"},"typeName":{"id":51084,"keyName":"key","keyNameLocation":"529:3:43","keyType":{"id":51080,"name":"address","nodeType":"ElementaryTypeName","src":"521:7:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"513:59:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_bytes4_$_t_bool_$_$","typeString":"mapping(address => mapping(bytes4 => bool))"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":51083,"keyName":"sel","keyNameLocation":"551:3:43","keyType":{"id":51081,"name":"bytes4","nodeType":"ElementaryTypeName","src":"544:6:43","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},"nodeType":"Mapping","src":"536:35:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes4_$_t_bool_$","typeString":"mapping(bytes4 => bool)"},"valueName":"allowed","valueNameLocation":"563:7:43","valueType":{"id":51082,"name":"bool","nodeType":"ElementaryTypeName","src":"558:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}}},"visibility":"public"},{"id":51090,"nodeType":"StructDefinition","src":"692:177:43","nodes":[],"canonicalName":"SessionKeyValidator.SessionKeyData","members":[{"constant":false,"id":51087,"mutability":"mutable","name":"dailyCap","nameLocation":"732:8:43","nodeType":"VariableDeclaration","scope":51090,"src":"724:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51086,"name":"uint256","nodeType":"ElementaryTypeName","src":"724:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51089,"mutability":"mutable","name":"hasTargetRestrictions","nameLocation":"806:21:43","nodeType":"VariableDeclaration","scope":51090,"src":"801:26:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51088,"name":"bool","nodeType":"ElementaryTypeName","src":"801:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"name":"SessionKeyData","nameLocation":"699:14:43","scope":51732,"visibility":"public"},{"id":51095,"nodeType":"VariableDeclaration","src":"879:56:43","nodes":[],"constant":false,"functionSelector":"05e5fa2f","mutability":"mutable","name":"sessionKeyData","nameLocation":"921:14:43","scope":51732,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_SessionKeyData_$51090_storage_$","typeString":"mapping(address => struct SessionKeyValidator.SessionKeyData)"},"typeName":{"id":51094,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":51091,"name":"address","nodeType":"ElementaryTypeName","src":"887:7:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"879:34:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_SessionKeyData_$51090_storage_$","typeString":"mapping(address => struct SessionKeyValidator.SessionKeyData)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":51093,"nodeType":"UserDefinedTypeName","pathNode":{"id":51092,"name":"SessionKeyData","nameLocations":["898:14:43"],"nodeType":"IdentifierPath","referencedDeclaration":51090,"src":"898:14:43"},"referencedDeclaration":51090,"src":"898:14:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"}}},"visibility":"public"},{"id":51101,"nodeType":"VariableDeclaration","src":"1031:69:43","nodes":[],"constant":false,"functionSelector":"d2b240e1","mutability":"mutable","name":"windowSpending","nameLocation":"1086:14:43","scope":51732,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_uint256_$_t_uint256_$_$","typeString":"mapping(address => mapping(uint256 => uint256))"},"typeName":{"id":51100,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":51096,"name":"address","nodeType":"ElementaryTypeName","src":"1039:7:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"1031:47:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_uint256_$_t_uint256_$_$","typeString":"mapping(address => mapping(uint256 => uint256))"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":51099,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":51097,"name":"uint256","nodeType":"ElementaryTypeName","src":"1058:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Mapping","src":"1050:27:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":51098,"name":"uint256","nodeType":"ElementaryTypeName","src":"1069:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}}},"visibility":"public"},{"id":51107,"nodeType":"VariableDeclaration","src":"1162:65:43","nodes":[],"constant":false,"functionSelector":"5e8c1866","mutability":"mutable","name":"targetAllowed","nameLocation":"1214:13:43","scope":51732,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_address_$_t_bool_$_$","typeString":"mapping(address => mapping(address => bool))"},"typeName":{"id":51106,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":51102,"name":"address","nodeType":"ElementaryTypeName","src":"1170:7:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"1162:44:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_address_$_t_bool_$_$","typeString":"mapping(address => mapping(address => bool))"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":51105,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":51103,"name":"address","nodeType":"ElementaryTypeName","src":"1189:7:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"1181:24:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":51104,"name":"bool","nodeType":"ElementaryTypeName","src":"1200:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}}},"visibility":"public"},{"id":51113,"nodeType":"EventDefinition","src":"1262:57:43","nodes":[],"anonymous":false,"eventSelector":"0912f4d1d98ef9a44becd4b656f606db4d754f9dd9c16167263ea9c491ed1559","name":"SessionGranted","nameLocation":"1268:14:43","parameters":{"id":51112,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51109,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1299:3:43","nodeType":"VariableDeclaration","scope":51113,"src":"1283:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51108,"name":"address","nodeType":"ElementaryTypeName","src":"1283:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51111,"indexed":false,"mutability":"mutable","name":"expiry","nameLocation":"1311:6:43","nodeType":"VariableDeclaration","scope":51113,"src":"1304:13:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":51110,"name":"uint64","nodeType":"ElementaryTypeName","src":"1304:6:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"1282:36:43"}},{"id":51117,"nodeType":"EventDefinition","src":"1324:42:43","nodes":[],"anonymous":false,"eventSelector":"2991ab7bfda4556c9e662762b3dfa89a1df391084c4278286d466c1c187e5523","name":"SessionRevoked","nameLocation":"1330:14:43","parameters":{"id":51116,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51115,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1361:3:43","nodeType":"VariableDeclaration","scope":51117,"src":"1345:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51114,"name":"address","nodeType":"ElementaryTypeName","src":"1345:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1344:21:43"}},{"id":51125,"nodeType":"EventDefinition","src":"1371:77:43","nodes":[],"anonymous":false,"eventSelector":"840b667f87738b9da1db624bc140d21f834cc7842dfc078ecadec9f6ec2c62ca","name":"SelectorAllowed","nameLocation":"1377:15:43","parameters":{"id":51124,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51119,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1409:3:43","nodeType":"VariableDeclaration","scope":51125,"src":"1393:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51118,"name":"address","nodeType":"ElementaryTypeName","src":"1393:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51121,"indexed":true,"mutability":"mutable","name":"sel","nameLocation":"1429:3:43","nodeType":"VariableDeclaration","scope":51125,"src":"1414:18:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"},"typeName":{"id":51120,"name":"bytes4","nodeType":"ElementaryTypeName","src":"1414:6:43","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},"visibility":"internal"},{"constant":false,"id":51123,"indexed":false,"mutability":"mutable","name":"allowed","nameLocation":"1439:7:43","nodeType":"VariableDeclaration","scope":51125,"src":"1434:12:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51122,"name":"bool","nodeType":"ElementaryTypeName","src":"1434:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"1392:55:43"}},{"id":51133,"nodeType":"EventDefinition","src":"1520:71:43","nodes":[],"anonymous":false,"eventSelector":"c2373395179af6c39f367d2c3bc2a1001ac3bf9a6b3fea1531486f15ca6bc6d0","name":"CapExceeded","nameLocation":"1526:11:43","parameters":{"id":51132,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51127,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1554:3:43","nodeType":"VariableDeclaration","scope":51133,"src":"1538:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51126,"name":"address","nodeType":"ElementaryTypeName","src":"1538:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51129,"indexed":false,"mutability":"mutable","name":"attempted","nameLocation":"1567:9:43","nodeType":"VariableDeclaration","scope":51133,"src":"1559:17:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51128,"name":"uint256","nodeType":"ElementaryTypeName","src":"1559:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51131,"indexed":false,"mutability":"mutable","name":"cap","nameLocation":"1586:3:43","nodeType":"VariableDeclaration","scope":51133,"src":"1578:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51130,"name":"uint256","nodeType":"ElementaryTypeName","src":"1578:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1537:53:43"}},{"id":51141,"nodeType":"EventDefinition","src":"1596:73:43","nodes":[],"anonymous":false,"eventSelector":"07d29fe902c19439a8d8fda5b2a81cedb43480fe2ec625cdff236d6b276284ef","name":"CapConsumed","nameLocation":"1602:11:43","parameters":{"id":51140,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51135,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1630:3:43","nodeType":"VariableDeclaration","scope":51141,"src":"1614:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51134,"name":"address","nodeType":"ElementaryTypeName","src":"1614:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51137,"indexed":false,"mutability":"mutable","name":"amount","nameLocation":"1643:6:43","nodeType":"VariableDeclaration","scope":51141,"src":"1635:14:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51136,"name":"uint256","nodeType":"ElementaryTypeName","src":"1635:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51139,"indexed":false,"mutability":"mutable","name":"newTotal","nameLocation":"1659:8:43","nodeType":"VariableDeclaration","scope":51141,"src":"1651:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51138,"name":"uint256","nodeType":"ElementaryTypeName","src":"1651:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1613:55:43"}},{"id":51147,"nodeType":"EventDefinition","src":"1674:70:43","nodes":[],"anonymous":false,"eventSelector":"80ca7776006643e193e8662c529019a50fe02992c2067105aaaea7461e8b7ab0","name":"AllowlistViolation","nameLocation":"1680:18:43","parameters":{"id":51146,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51143,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1715:3:43","nodeType":"VariableDeclaration","scope":51147,"src":"1699:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51142,"name":"address","nodeType":"ElementaryTypeName","src":"1699:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51145,"indexed":true,"mutability":"mutable","name":"target","nameLocation":"1736:6:43","nodeType":"VariableDeclaration","scope":51147,"src":"1720:22:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51144,"name":"address","nodeType":"ElementaryTypeName","src":"1720:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1698:45:43"}},{"id":51153,"nodeType":"EventDefinition","src":"1749:59:43","nodes":[],"anonymous":false,"eventSelector":"18a494d71d2c80a6d163dc672af893c91b261f4829067887a8168048b2745842","name":"SessionCapSet","nameLocation":"1755:13:43","parameters":{"id":51152,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51149,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1785:3:43","nodeType":"VariableDeclaration","scope":51153,"src":"1769:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51148,"name":"address","nodeType":"ElementaryTypeName","src":"1769:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51151,"indexed":false,"mutability":"mutable","name":"dailyCap","nameLocation":"1798:8:43","nodeType":"VariableDeclaration","scope":51153,"src":"1790:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51150,"name":"uint256","nodeType":"ElementaryTypeName","src":"1790:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1768:39:43"}},{"id":51161,"nodeType":"EventDefinition","src":"1813:79:43","nodes":[],"anonymous":false,"eventSelector":"0f89b9b3f51b332e771731693eb2252fedd0db543f62b3fb654a1e459bec49ad","name":"TargetAllowed","nameLocation":"1819:13:43","parameters":{"id":51160,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51155,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1849:3:43","nodeType":"VariableDeclaration","scope":51161,"src":"1833:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51154,"name":"address","nodeType":"ElementaryTypeName","src":"1833:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51157,"indexed":true,"mutability":"mutable","name":"target","nameLocation":"1870:6:43","nodeType":"VariableDeclaration","scope":51161,"src":"1854:22:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51156,"name":"address","nodeType":"ElementaryTypeName","src":"1854:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51159,"indexed":false,"mutability":"mutable","name":"allowed","nameLocation":"1883:7:43","nodeType":"VariableDeclaration","scope":51161,"src":"1878:12:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51158,"name":"bool","nodeType":"ElementaryTypeName","src":"1878:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"1832:59:43"}},{"id":51167,"nodeType":"EventDefinition","src":"1897:63:43","nodes":[],"anonymous":false,"eventSelector":"3793edc39880f20ce83ae0d7bbb39a32d588e871b68f4f22935128b8d944fff3","name":"TargetRestrictionsSet","nameLocation":"1903:21:43","parameters":{"id":51166,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51163,"indexed":true,"mutability":"mutable","name":"key","nameLocation":"1941:3:43","nodeType":"VariableDeclaration","scope":51167,"src":"1925:19:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51162,"name":"address","nodeType":"ElementaryTypeName","src":"1925:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51165,"indexed":false,"mutability":"mutable","name":"enabled","nameLocation":"1951:7:43","nodeType":"VariableDeclaration","scope":51167,"src":"1946:12:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51164,"name":"bool","nodeType":"ElementaryTypeName","src":"1946:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"1924:35:43"}},{"id":51179,"nodeType":"ModifierDefinition","src":"1966:96:43","nodes":[],"body":{"id":51178,"nodeType":"Block","src":"1989:73:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":51173,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":51170,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"2007:3:43","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":51171,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2011:6:43","memberName":"sender","nodeType":"MemberAccess","src":"2007:10:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":51172,"name":"account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51075,"src":"2021:7:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2007:21:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"6e6f74206163636f756e74","id":51174,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2030:13:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_a82c668446d62fe1eb8ee29e042b9094b799793205e85a489d01826262d5faab","typeString":"literal_string \"not account\""},"value":"not account"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_a82c668446d62fe1eb8ee29e042b9094b799793205e85a489d01826262d5faab","typeString":"literal_string \"not account\""}],"id":51169,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"1999:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51175,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1999:45:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51176,"nodeType":"ExpressionStatement","src":"1999:45:43"},{"id":51177,"nodeType":"PlaceholderStatement","src":"2054:1:43"}]},"name":"onlyAccount","nameLocation":"1975:11:43","parameters":{"id":51168,"nodeType":"ParameterList","parameters":[],"src":"1986:2:43"},"virtual":false,"visibility":"internal"},{"id":51199,"nodeType":"FunctionDefinition","src":"2068:122:43","nodes":[],"body":{"id":51198,"nodeType":"Block","src":"2098:92:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":51190,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51185,"name":"_account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51181,"src":"2116:8:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":51188,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2136:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":51187,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2128:7:43","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":51186,"name":"address","nodeType":"ElementaryTypeName","src":"2128:7:43","typeDescriptions":{}}},"id":51189,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2128:10:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2116:22:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f206163636f756e74","id":51191,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2140:14:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_8b35e2ae6c8ecfcecc9db855a6973d7656a0f89590940130068dcc036507a485","typeString":"literal_string \"zero account\""},"value":"zero account"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_8b35e2ae6c8ecfcecc9db855a6973d7656a0f89590940130068dcc036507a485","typeString":"literal_string \"zero account\""}],"id":51184,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"2108:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51192,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2108:47:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51193,"nodeType":"ExpressionStatement","src":"2108:47:43"},{"expression":{"id":51196,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51194,"name":"account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51075,"src":"2165:7:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51195,"name":"_account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51181,"src":"2175:8:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2165:18:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":51197,"nodeType":"ExpressionStatement","src":"2165:18:43"}]},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":51182,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51181,"mutability":"mutable","name":"_account","nameLocation":"2088:8:43","nodeType":"VariableDeclaration","scope":51199,"src":"2080:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51180,"name":"address","nodeType":"ElementaryTypeName","src":"2080:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2079:18:43"},"returnParameters":{"id":51183,"nodeType":"ParameterList","parameters":[],"src":"2098:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":51240,"nodeType":"FunctionDefinition","src":"2196:355:43","nodes":[],"body":{"id":51239,"nodeType":"Block","src":"2260:291:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":51214,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51209,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51201,"src":"2278:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":51212,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2293:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":51211,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2285:7:43","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":51210,"name":"address","nodeType":"ElementaryTypeName","src":"2285:7:43","typeDescriptions":{}}},"id":51213,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2285:10:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2278:17:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f206b6579","id":51215,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2297:10:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""},"value":"zero key"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""}],"id":51208,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"2270:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51216,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2270:38:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51217,"nodeType":"ExpressionStatement","src":"2270:38:43"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51224,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51219,"name":"expiry","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51203,"src":"2407:6:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51223,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":51220,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"2416:5:43","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":51221,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2422:9:43","memberName":"timestamp","nodeType":"MemberAccess","src":"2416:15:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"3630","id":51222,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2434:2:43","typeDescriptions":{"typeIdentifier":"t_rational_60_by_1","typeString":"int_const 60"},"value":"60"},"src":"2416:20:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2407:29:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"65787069727920746f6f20736f6f6e","id":51225,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2438:17:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_6099fcb28b8cc8243cf3b78104fcddea52747aec85cc2b9cdf3d2006a00f325d","typeString":"literal_string \"expiry too soon\""},"value":"expiry too soon"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_6099fcb28b8cc8243cf3b78104fcddea52747aec85cc2b9cdf3d2006a00f325d","typeString":"literal_string \"expiry too soon\""}],"id":51218,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"2399:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51226,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2399:57:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51227,"nodeType":"ExpressionStatement","src":"2399:57:43"},{"expression":{"id":51232,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":51228,"name":"sessionExpiry","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51079,"src":"2475:13:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint64_$","typeString":"mapping(address => uint64)"}},"id":51230,"indexExpression":{"id":51229,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51201,"src":"2489:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"2475:18:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51231,"name":"expiry","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51203,"src":"2496:6:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"2475:27:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"id":51233,"nodeType":"ExpressionStatement","src":"2475:27:43"},{"eventCall":{"arguments":[{"id":51235,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51201,"src":"2532:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51236,"name":"expiry","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51203,"src":"2537:6:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint64","typeString":"uint64"}],"id":51234,"name":"SessionGranted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51113,"src":"2517:14:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint64_$returns$__$","typeString":"function (address,uint64)"}},"id":51237,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2517:27:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51238,"nodeType":"EmitStatement","src":"2512:32:43"}]},"functionSelector":"48d6bbca","implemented":true,"kind":"function","modifiers":[{"id":51206,"kind":"modifierInvocation","modifierName":{"id":51205,"name":"onlyAccount","nameLocations":["2248:11:43"],"nodeType":"IdentifierPath","referencedDeclaration":51179,"src":"2248:11:43"},"nodeType":"ModifierInvocation","src":"2248:11:43"}],"name":"grant","nameLocation":"2205:5:43","parameters":{"id":51204,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51201,"mutability":"mutable","name":"key","nameLocation":"2219:3:43","nodeType":"VariableDeclaration","scope":51240,"src":"2211:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51200,"name":"address","nodeType":"ElementaryTypeName","src":"2211:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51203,"mutability":"mutable","name":"expiry","nameLocation":"2231:6:43","nodeType":"VariableDeclaration","scope":51240,"src":"2224:13:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":51202,"name":"uint64","nodeType":"ElementaryTypeName","src":"2224:6:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"2210:28:43"},"returnParameters":{"id":51207,"nodeType":"ParameterList","parameters":[],"src":"2260:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51257,"nodeType":"FunctionDefinition","src":"2557:126:43","nodes":[],"body":{"id":51256,"nodeType":"Block","src":"2607:76:43","nodes":[],"statements":[{"expression":{"id":51250,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"delete","prefix":true,"src":"2617:25:43","subExpression":{"baseExpression":{"id":51247,"name":"sessionExpiry","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51079,"src":"2624:13:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint64_$","typeString":"mapping(address => uint64)"}},"id":51249,"indexExpression":{"id":51248,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51242,"src":"2638:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"2624:18:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51251,"nodeType":"ExpressionStatement","src":"2617:25:43"},{"eventCall":{"arguments":[{"id":51253,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51242,"src":"2672:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":51252,"name":"SessionRevoked","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51117,"src":"2657:14:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$returns$__$","typeString":"function (address)"}},"id":51254,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2657:19:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51255,"nodeType":"EmitStatement","src":"2652:24:43"}]},"functionSelector":"74a8f103","implemented":true,"kind":"function","modifiers":[{"id":51245,"kind":"modifierInvocation","modifierName":{"id":51244,"name":"onlyAccount","nameLocations":["2595:11:43"],"nodeType":"IdentifierPath","referencedDeclaration":51179,"src":"2595:11:43"},"nodeType":"ModifierInvocation","src":"2595:11:43"}],"name":"revoke","nameLocation":"2566:6:43","parameters":{"id":51243,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51242,"mutability":"mutable","name":"key","nameLocation":"2581:3:43","nodeType":"VariableDeclaration","scope":51257,"src":"2573:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51241,"name":"address","nodeType":"ElementaryTypeName","src":"2573:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2572:13:43"},"returnParameters":{"id":51246,"nodeType":"ParameterList","parameters":[],"src":"2607:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51293,"nodeType":"FunctionDefinition","src":"2689:232:43","nodes":[],"body":{"id":51292,"nodeType":"Block","src":"2772:149:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":51274,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51269,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51259,"src":"2790:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":51272,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2805:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":51271,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2797:7:43","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":51270,"name":"address","nodeType":"ElementaryTypeName","src":"2797:7:43","typeDescriptions":{}}},"id":51273,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2797:10:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2790:17:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f206b6579","id":51275,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2809:10:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""},"value":"zero key"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""}],"id":51268,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"2782:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51276,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2782:38:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51277,"nodeType":"ExpressionStatement","src":"2782:38:43"},{"expression":{"id":51284,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"baseExpression":{"id":51278,"name":"selectorAllowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51085,"src":"2830:15:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_bytes4_$_t_bool_$_$","typeString":"mapping(address => mapping(bytes4 => bool))"}},"id":51281,"indexExpression":{"id":51279,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51259,"src":"2846:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2830:20:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes4_$_t_bool_$","typeString":"mapping(bytes4 => bool)"}},"id":51282,"indexExpression":{"id":51280,"name":"sel","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51261,"src":"2851:3:43","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"2830:25:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51283,"name":"allowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51263,"src":"2858:7:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2830:35:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51285,"nodeType":"ExpressionStatement","src":"2830:35:43"},{"eventCall":{"arguments":[{"id":51287,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51259,"src":"2896:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51288,"name":"sel","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51261,"src":"2901:3:43","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},{"id":51289,"name":"allowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51263,"src":"2906:7:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes4","typeString":"bytes4"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":51286,"name":"SelectorAllowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51125,"src":"2880:15:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_bytes4_$_t_bool_$returns$__$","typeString":"function (address,bytes4,bool)"}},"id":51290,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2880:34:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51291,"nodeType":"EmitStatement","src":"2875:39:43"}]},"functionSelector":"d8899c0b","implemented":true,"kind":"function","modifiers":[{"id":51266,"kind":"modifierInvocation","modifierName":{"id":51265,"name":"onlyAccount","nameLocations":["2760:11:43"],"nodeType":"IdentifierPath","referencedDeclaration":51179,"src":"2760:11:43"},"nodeType":"ModifierInvocation","src":"2760:11:43"}],"name":"allowSelector","nameLocation":"2698:13:43","parameters":{"id":51264,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51259,"mutability":"mutable","name":"key","nameLocation":"2720:3:43","nodeType":"VariableDeclaration","scope":51293,"src":"2712:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51258,"name":"address","nodeType":"ElementaryTypeName","src":"2712:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51261,"mutability":"mutable","name":"sel","nameLocation":"2732:3:43","nodeType":"VariableDeclaration","scope":51293,"src":"2725:10:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"},"typeName":{"id":51260,"name":"bytes4","nodeType":"ElementaryTypeName","src":"2725:6:43","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},"visibility":"internal"},{"constant":false,"id":51263,"mutability":"mutable","name":"allowed","nameLocation":"2742:7:43","nodeType":"VariableDeclaration","scope":51293,"src":"2737:12:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51262,"name":"bool","nodeType":"ElementaryTypeName","src":"2737:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"2711:39:43"},"returnParameters":{"id":51267,"nodeType":"ParameterList","parameters":[],"src":"2772:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51334,"nodeType":"FunctionDefinition","src":"2927:536:43","nodes":[],"body":{"id":51333,"nodeType":"Block","src":"3040:423:43","nodes":[],"statements":[{"assignments":[51304,51307,null],"declarations":[{"constant":false,"id":51304,"mutability":"mutable","name":"rec","nameLocation":"3147:3:43","nodeType":"VariableDeclaration","scope":51333,"src":"3139:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51303,"name":"address","nodeType":"ElementaryTypeName","src":"3139:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51307,"mutability":"mutable","name":"err","nameLocation":"3171:3:43","nodeType":"VariableDeclaration","scope":51333,"src":"3152:22:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_enum$_RecoverError_$41027","typeString":"enum ECDSA.RecoverError"},"typeName":{"id":51306,"nodeType":"UserDefinedTypeName","pathNode":{"id":51305,"name":"ECDSA.RecoverError","nameLocations":["3152:5:43","3158:12:43"],"nodeType":"IdentifierPath","referencedDeclaration":41027,"src":"3152:18:43"},"referencedDeclaration":41027,"src":"3152:18:43","typeDescriptions":{"typeIdentifier":"t_enum$_RecoverError_$41027","typeString":"enum ECDSA.RecoverError"}},"visibility":"internal"},null],"id":51314,"initialValue":{"arguments":[{"id":51312,"name":"userOpSignature","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51295,"src":"3226:15:43","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}],"expression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":51308,"name":"userOpHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51297,"src":"3179:10:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":51309,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3190:22:43","memberName":"toEthSignedMessageHash","nodeType":"MemberAccess","referencedDeclaration":41382,"src":"3179:33:43","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$returns$_t_bytes32_$attached_to$_t_bytes32_$","typeString":"function (bytes32) pure returns (bytes32)"}},"id":51310,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3179:35:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":51311,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3215:10:43","memberName":"tryRecover","nodeType":"MemberAccess","referencedDeclaration":41093,"src":"3179:46:43","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$_t_bytes_memory_ptr_$returns$_t_address_$_t_enum$_RecoverError_$41027_$_t_bytes32_$attached_to$_t_bytes32_$","typeString":"function (bytes32,bytes memory) pure returns (address,enum ECDSA.RecoverError,bytes32)"}},"id":51313,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3179:63:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_address_$_t_enum$_RecoverError_$41027_$_t_bytes32_$","typeString":"tuple(address,enum ECDSA.RecoverError,bytes32)"}},"nodeType":"VariableDeclarationStatement","src":"3138:104:43"},{"condition":{"commonType":{"typeIdentifier":"t_enum$_RecoverError_$41027","typeString":"enum ECDSA.RecoverError"},"id":51319,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51315,"name":"err","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51307,"src":"3256:3:43","typeDescriptions":{"typeIdentifier":"t_enum$_RecoverError_$41027","typeString":"enum ECDSA.RecoverError"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"expression":{"expression":{"id":51316,"name":"ECDSA","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41367,"src":"3263:5:43","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ECDSA_$41367_$","typeString":"type(library ECDSA)"}},"id":51317,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3269:12:43","memberName":"RecoverError","nodeType":"MemberAccess","referencedDeclaration":41027,"src":"3263:18:43","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_RecoverError_$41027_$","typeString":"type(enum ECDSA.RecoverError)"}},"id":51318,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3282:7:43","memberName":"NoError","nodeType":"MemberAccess","referencedDeclaration":41023,"src":"3263:26:43","typeDescriptions":{"typeIdentifier":"t_enum$_RecoverError_$41027","typeString":"enum ECDSA.RecoverError"}},"src":"3256:33:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51322,"nodeType":"IfStatement","src":"3252:51:43","trueBody":{"expression":{"hexValue":"66616c7365","id":51320,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3298:5:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"functionReturnParameters":51302,"id":51321,"nodeType":"Return","src":"3291:12:43"}},{"assignments":[51324],"declarations":[{"constant":false,"id":51324,"mutability":"mutable","name":"exp","nameLocation":"3320:3:43","nodeType":"VariableDeclaration","scope":51333,"src":"3313:10:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":51323,"name":"uint64","nodeType":"ElementaryTypeName","src":"3313:6:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"id":51328,"initialValue":{"baseExpression":{"id":51325,"name":"sessionExpiry","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51079,"src":"3326:13:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint64_$","typeString":"mapping(address => uint64)"}},"id":51327,"indexExpression":{"id":51326,"name":"rec","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51304,"src":"3340:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3326:18:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"VariableDeclarationStatement","src":"3313:31:43"},{"expression":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":51331,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51329,"name":"exp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51324,"src":"3448:3:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":51330,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3455:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3448:8:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":51302,"id":51332,"nodeType":"Return","src":"3441:15:43"}]},"baseFunctions":[51056],"functionSelector":"0f3556da","implemented":true,"kind":"function","modifiers":[],"name":"isValidUserOp","nameLocation":"2936:13:43","overrides":{"id":51299,"nodeType":"OverrideSpecifier","overrides":[],"src":"3016:8:43"},"parameters":{"id":51298,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51295,"mutability":"mutable","name":"userOpSignature","nameLocation":"2965:15:43","nodeType":"VariableDeclaration","scope":51334,"src":"2950:30:43","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":51294,"name":"bytes","nodeType":"ElementaryTypeName","src":"2950:5:43","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"},{"constant":false,"id":51297,"mutability":"mutable","name":"userOpHash","nameLocation":"2990:10:43","nodeType":"VariableDeclaration","scope":51334,"src":"2982:18:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":51296,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2982:7:43","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"2949:52:43"},"returnParameters":{"id":51302,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51301,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51334,"src":"3034:4:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51300,"name":"bool","nodeType":"ElementaryTypeName","src":"3034:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"3033:6:43"},"scope":51732,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":51376,"nodeType":"FunctionDefinition","src":"3736:292:43","nodes":[],"body":{"id":51375,"nodeType":"Block","src":"3812:216:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":51350,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51345,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51337,"src":"3830:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":51348,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3845:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":51347,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3837:7:43","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":51346,"name":"address","nodeType":"ElementaryTypeName","src":"3837:7:43","typeDescriptions":{}}},"id":51349,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3837:10:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3830:17:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f206b6579","id":51351,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3849:10:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""},"value":"zero key"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""}],"id":51344,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"3822:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51352,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3822:38:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51353,"nodeType":"ExpressionStatement","src":"3822:38:43"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":51359,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"baseExpression":{"id":51355,"name":"sessionExpiry","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51079,"src":"3878:13:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint64_$","typeString":"mapping(address => uint64)"}},"id":51357,"indexExpression":{"id":51356,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51337,"src":"3892:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3878:18:43","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":51358,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3899:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3878:22:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"6b6579206e6f74206772616e746564","id":51360,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3902:17:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_cb15418db7865ab4be88fff67ffe27ef029133fcc495d5c95fe00374d1b06725","typeString":"literal_string \"key not granted\""},"value":"key not granted"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_cb15418db7865ab4be88fff67ffe27ef029133fcc495d5c95fe00374d1b06725","typeString":"literal_string \"key not granted\""}],"id":51354,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"3870:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51361,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3870:50:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51362,"nodeType":"ExpressionStatement","src":"3870:50:43"},{"expression":{"id":51368,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"baseExpression":{"id":51363,"name":"sessionKeyData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51095,"src":"3939:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_SessionKeyData_$51090_storage_$","typeString":"mapping(address => struct SessionKeyValidator.SessionKeyData storage ref)"}},"id":51365,"indexExpression":{"id":51364,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51337,"src":"3954:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3939:19:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage","typeString":"struct SessionKeyValidator.SessionKeyData storage ref"}},"id":51366,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"3959:8:43","memberName":"dailyCap","nodeType":"MemberAccess","referencedDeclaration":51087,"src":"3939:28:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51367,"name":"dailyCap","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51339,"src":"3970:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3939:39:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51369,"nodeType":"ExpressionStatement","src":"3939:39:43"},{"eventCall":{"arguments":[{"id":51371,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51337,"src":"4007:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51372,"name":"dailyCap","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51339,"src":"4012:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":51370,"name":"SessionCapSet","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51153,"src":"3993:13:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":51373,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3993:28:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51374,"nodeType":"EmitStatement","src":"3988:33:43"}]},"documentation":{"id":51335,"nodeType":"StructuredDocumentation","src":"3549:182:43","text":" @notice Set daily spending cap for a session key\n @param key Session key address\n @param dailyCap Maximum amount the key can spend per day (0 = no cap)"},"functionSelector":"7ee1ce1d","implemented":true,"kind":"function","modifiers":[{"id":51342,"kind":"modifierInvocation","modifierName":{"id":51341,"name":"onlyAccount","nameLocations":["3800:11:43"],"nodeType":"IdentifierPath","referencedDeclaration":51179,"src":"3800:11:43"},"nodeType":"ModifierInvocation","src":"3800:11:43"}],"name":"setSpendingCap","nameLocation":"3745:14:43","parameters":{"id":51340,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51337,"mutability":"mutable","name":"key","nameLocation":"3768:3:43","nodeType":"VariableDeclaration","scope":51376,"src":"3760:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51336,"name":"address","nodeType":"ElementaryTypeName","src":"3760:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51339,"mutability":"mutable","name":"dailyCap","nameLocation":"3781:8:43","nodeType":"VariableDeclaration","scope":51376,"src":"3773:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51338,"name":"uint256","nodeType":"ElementaryTypeName","src":"3773:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3759:31:43"},"returnParameters":{"id":51343,"nodeType":"ParameterList","parameters":[],"src":"3812:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51409,"nodeType":"FunctionDefinition","src":"4226:245:43","nodes":[],"body":{"id":51408,"nodeType":"Block","src":"4305:166:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":51392,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51387,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51379,"src":"4323:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":51390,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4338:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":51389,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4330:7:43","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":51388,"name":"address","nodeType":"ElementaryTypeName","src":"4330:7:43","typeDescriptions":{}}},"id":51391,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4330:10:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4323:17:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f206b6579","id":51393,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4342:10:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""},"value":"zero key"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""}],"id":51386,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"4315:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51394,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4315:38:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51395,"nodeType":"ExpressionStatement","src":"4315:38:43"},{"expression":{"id":51401,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"baseExpression":{"id":51396,"name":"sessionKeyData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51095,"src":"4363:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_SessionKeyData_$51090_storage_$","typeString":"mapping(address => struct SessionKeyValidator.SessionKeyData storage ref)"}},"id":51398,"indexExpression":{"id":51397,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51379,"src":"4378:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4363:19:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage","typeString":"struct SessionKeyValidator.SessionKeyData storage ref"}},"id":51399,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"4383:21:43","memberName":"hasTargetRestrictions","nodeType":"MemberAccess","referencedDeclaration":51089,"src":"4363:41:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51400,"name":"enabled","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51381,"src":"4407:7:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"4363:51:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51402,"nodeType":"ExpressionStatement","src":"4363:51:43"},{"eventCall":{"arguments":[{"id":51404,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51379,"src":"4451:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51405,"name":"enabled","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51381,"src":"4456:7:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":51403,"name":"TargetRestrictionsSet","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51167,"src":"4429:21:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_bool_$returns$__$","typeString":"function (address,bool)"}},"id":51406,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4429:35:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51407,"nodeType":"EmitStatement","src":"4424:40:43"}]},"documentation":{"id":51377,"nodeType":"StructuredDocumentation","src":"4038:183:43","text":" @notice Enable/disable target restrictions for a session key\n @param key Session key address\n @param enabled If true, only allowed targets can be called"},"functionSelector":"38cc7872","implemented":true,"kind":"function","modifiers":[{"id":51384,"kind":"modifierInvocation","modifierName":{"id":51383,"name":"onlyAccount","nameLocations":["4293:11:43"],"nodeType":"IdentifierPath","referencedDeclaration":51179,"src":"4293:11:43"},"nodeType":"ModifierInvocation","src":"4293:11:43"}],"name":"setTargetRestrictions","nameLocation":"4235:21:43","parameters":{"id":51382,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51379,"mutability":"mutable","name":"key","nameLocation":"4265:3:43","nodeType":"VariableDeclaration","scope":51409,"src":"4257:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51378,"name":"address","nodeType":"ElementaryTypeName","src":"4257:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51381,"mutability":"mutable","name":"enabled","nameLocation":"4275:7:43","nodeType":"VariableDeclaration","scope":51409,"src":"4270:12:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51380,"name":"bool","nodeType":"ElementaryTypeName","src":"4270:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"4256:27:43"},"returnParameters":{"id":51385,"nodeType":"ParameterList","parameters":[],"src":"4305:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51456,"nodeType":"FunctionDefinition","src":"4700:299:43","nodes":[],"body":{"id":51455,"nodeType":"Block","src":"4785:214:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":51427,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51422,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51412,"src":"4803:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":51425,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4818:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":51424,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4810:7:43","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":51423,"name":"address","nodeType":"ElementaryTypeName","src":"4810:7:43","typeDescriptions":{}}},"id":51426,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4810:10:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4803:17:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f206b6579","id":51428,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4822:10:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""},"value":"zero key"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_b75f65c4951076829f065cb076ce9b7f28a9f78df39e1d52a981c3d830211af2","typeString":"literal_string \"zero key\""}],"id":51421,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"4795:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51429,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4795:38:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51430,"nodeType":"ExpressionStatement","src":"4795:38:43"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":51437,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51432,"name":"target","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51414,"src":"4851:6:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":51435,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4869:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":51434,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4861:7:43","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":51433,"name":"address","nodeType":"ElementaryTypeName","src":"4861:7:43","typeDescriptions":{}}},"id":51436,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4861:10:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4851:20:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f20746172676574","id":51438,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4873:13:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_03d679648f06a8276bbb56a59eb736960cc61ec8063d4d95985f46f68bef6b1f","typeString":"literal_string \"zero target\""},"value":"zero target"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_03d679648f06a8276bbb56a59eb736960cc61ec8063d4d95985f46f68bef6b1f","typeString":"literal_string \"zero target\""}],"id":51431,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"4843:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51439,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4843:44:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51440,"nodeType":"ExpressionStatement","src":"4843:44:43"},{"expression":{"id":51447,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"baseExpression":{"id":51441,"name":"targetAllowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51107,"src":"4906:13:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_address_$_t_bool_$_$","typeString":"mapping(address => mapping(address => bool))"}},"id":51444,"indexExpression":{"id":51442,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51412,"src":"4920:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4906:18:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":51445,"indexExpression":{"id":51443,"name":"target","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51414,"src":"4925:6:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"4906:26:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51446,"name":"allowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51416,"src":"4935:7:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"4906:36:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51448,"nodeType":"ExpressionStatement","src":"4906:36:43"},{"eventCall":{"arguments":[{"id":51450,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51412,"src":"4971:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51451,"name":"target","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51414,"src":"4976:6:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51452,"name":"allowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51416,"src":"4984:7:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":51449,"name":"TargetAllowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51161,"src":"4957:13:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_bool_$returns$__$","typeString":"function (address,address,bool)"}},"id":51453,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4957:35:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51454,"nodeType":"EmitStatement","src":"4952:40:43"}]},"documentation":{"id":51410,"nodeType":"StructuredDocumentation","src":"4481:214:43","text":" @notice Allow or disallow a target address for a session key\n @param key Session key address\n @param target Target contract address\n @param allowed Whether the target is allowed"},"functionSelector":"504d496b","implemented":true,"kind":"function","modifiers":[{"id":51419,"kind":"modifierInvocation","modifierName":{"id":51418,"name":"onlyAccount","nameLocations":["4773:11:43"],"nodeType":"IdentifierPath","referencedDeclaration":51179,"src":"4773:11:43"},"nodeType":"ModifierInvocation","src":"4773:11:43"}],"name":"allowTarget","nameLocation":"4709:11:43","parameters":{"id":51417,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51412,"mutability":"mutable","name":"key","nameLocation":"4729:3:43","nodeType":"VariableDeclaration","scope":51456,"src":"4721:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51411,"name":"address","nodeType":"ElementaryTypeName","src":"4721:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51414,"mutability":"mutable","name":"target","nameLocation":"4742:6:43","nodeType":"VariableDeclaration","scope":51456,"src":"4734:14:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51413,"name":"address","nodeType":"ElementaryTypeName","src":"4734:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51416,"mutability":"mutable","name":"allowed","nameLocation":"4755:7:43","nodeType":"VariableDeclaration","scope":51456,"src":"4750:12:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51415,"name":"bool","nodeType":"ElementaryTypeName","src":"4750:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"4720:43:43"},"returnParameters":{"id":51420,"nodeType":"ParameterList","parameters":[],"src":"4785:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51472,"nodeType":"FunctionDefinition","src":"5349:120:43","nodes":[],"body":{"id":51471,"nodeType":"Block","src":"5418:51:43","nodes":[],"statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51469,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":51466,"name":"timestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51459,"src":"5443:9:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint48","typeString":"uint48"}],"id":51465,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5435:7:43","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":51464,"name":"uint256","nodeType":"ElementaryTypeName","src":"5435:7:43","typeDescriptions":{}}},"id":51467,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5435:18:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"hexValue":"31","id":51468,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5456:6:43","subdenomination":"days","typeDescriptions":{"typeIdentifier":"t_rational_86400_by_1","typeString":"int_const 86400"},"value":"1"},"src":"5435:27:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":51463,"id":51470,"nodeType":"Return","src":"5428:34:43"}]},"documentation":{"id":51457,"nodeType":"StructuredDocumentation","src":"5108:236:43","text":" @notice AUDITOR APPROVED: Calculate deterministic window ID from timestamp\n @param timestamp Timestamp for window calculation (from UserOp or current time)\n @return windowId Deterministic window identifier"},"functionSelector":"22d08136","implemented":true,"kind":"function","modifiers":[],"name":"getWindowId","nameLocation":"5358:11:43","parameters":{"id":51460,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51459,"mutability":"mutable","name":"timestamp","nameLocation":"5377:9:43","nodeType":"VariableDeclaration","scope":51472,"src":"5370:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":51458,"name":"uint48","nodeType":"ElementaryTypeName","src":"5370:6:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"}],"src":"5369:18:43"},"returnParameters":{"id":51463,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51462,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51472,"src":"5409:7:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51461,"name":"uint256","nodeType":"ElementaryTypeName","src":"5409:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5408:9:43"},"scope":51732,"stateMutability":"pure","virtual":false,"visibility":"public"},{"id":51521,"nodeType":"FunctionDefinition","src":"5768:438:43","nodes":[],"body":{"id":51520,"nodeType":"Block","src":"5894:312:43","nodes":[],"statements":[{"assignments":[51486],"declarations":[{"constant":false,"id":51486,"mutability":"mutable","name":"data","nameLocation":"5926:4:43","nodeType":"VariableDeclaration","scope":51520,"src":"5904:26:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"},"typeName":{"id":51485,"nodeType":"UserDefinedTypeName","pathNode":{"id":51484,"name":"SessionKeyData","nameLocations":["5904:14:43"],"nodeType":"IdentifierPath","referencedDeclaration":51090,"src":"5904:14:43"},"referencedDeclaration":51090,"src":"5904:14:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"}},"visibility":"internal"}],"id":51490,"initialValue":{"baseExpression":{"id":51487,"name":"sessionKeyData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51095,"src":"5933:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_SessionKeyData_$51090_storage_$","typeString":"mapping(address => struct SessionKeyValidator.SessionKeyData storage ref)"}},"id":51489,"indexExpression":{"id":51488,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51475,"src":"5948:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5933:19:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage","typeString":"struct SessionKeyValidator.SessionKeyData storage ref"}},"nodeType":"VariableDeclarationStatement","src":"5904:48:43"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51494,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":51491,"name":"data","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51486,"src":"5966:4:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData memory"}},"id":51492,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5971:8:43","memberName":"dailyCap","nodeType":"MemberAccess","referencedDeclaration":51087,"src":"5966:13:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":51493,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5983:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5966:18:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51497,"nodeType":"IfStatement","src":"5962:36:43","trueBody":{"expression":{"hexValue":"66616c7365","id":51495,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"5993:5:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"functionReturnParameters":51483,"id":51496,"nodeType":"Return","src":"5986:12:43"}},{"assignments":[51499],"declarations":[{"constant":false,"id":51499,"mutability":"mutable","name":"windowId","nameLocation":"6039:8:43","nodeType":"VariableDeclaration","scope":51520,"src":"6031:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51498,"name":"uint256","nodeType":"ElementaryTypeName","src":"6031:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51503,"initialValue":{"arguments":[{"id":51501,"name":"timestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51479,"src":"6062:9:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint48","typeString":"uint48"}],"id":51500,"name":"getWindowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51472,"src":"6050:11:43","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint48_$returns$_t_uint256_$","typeString":"function (uint48) pure returns (uint256)"}},"id":51502,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6050:22:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"6031:41:43"},{"assignments":[51505],"declarations":[{"constant":false,"id":51505,"mutability":"mutable","name":"currentSpent","nameLocation":"6090:12:43","nodeType":"VariableDeclaration","scope":51520,"src":"6082:20:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51504,"name":"uint256","nodeType":"ElementaryTypeName","src":"6082:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51511,"initialValue":{"baseExpression":{"baseExpression":{"id":51506,"name":"windowSpending","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51101,"src":"6105:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_uint256_$_t_uint256_$_$","typeString":"mapping(address => mapping(uint256 => uint256))"}},"id":51508,"indexExpression":{"id":51507,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51475,"src":"6120:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6105:19:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":51510,"indexExpression":{"id":51509,"name":"windowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51499,"src":"6125:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6105:29:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"6082:52:43"},{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51518,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51514,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51512,"name":"currentSpent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51505,"src":"6161:12:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":51513,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51477,"src":"6176:6:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6161:21:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":51515,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"6160:23:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"expression":{"id":51516,"name":"data","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51486,"src":"6186:4:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData memory"}},"id":51517,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6191:8:43","memberName":"dailyCap","nodeType":"MemberAccess","referencedDeclaration":51087,"src":"6186:13:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6160:39:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":51483,"id":51519,"nodeType":"Return","src":"6153:46:43"}]},"documentation":{"id":51473,"nodeType":"StructuredDocumentation","src":"5479:284:43","text":" @notice AUDITOR APPROVED: Check if spending would exceed cap (view only)\n @param key Session key address\n @param amount Amount to spend\n @param timestamp Timestamp for window calculation\n @return wouldExceed True if spending would exceed cap"},"functionSelector":"ff1e9112","implemented":true,"kind":"function","modifiers":[],"name":"wouldExceedCap","nameLocation":"5777:14:43","parameters":{"id":51480,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51475,"mutability":"mutable","name":"key","nameLocation":"5800:3:43","nodeType":"VariableDeclaration","scope":51521,"src":"5792:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51474,"name":"address","nodeType":"ElementaryTypeName","src":"5792:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51477,"mutability":"mutable","name":"amount","nameLocation":"5813:6:43","nodeType":"VariableDeclaration","scope":51521,"src":"5805:14:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51476,"name":"uint256","nodeType":"ElementaryTypeName","src":"5805:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51479,"mutability":"mutable","name":"timestamp","nameLocation":"5828:9:43","nodeType":"VariableDeclaration","scope":51521,"src":"5821:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":51478,"name":"uint48","nodeType":"ElementaryTypeName","src":"5821:6:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"}],"src":"5791:47:43"},"returnParameters":{"id":51483,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51482,"mutability":"mutable","name":"wouldExceed","nameLocation":"5876:11:43","nodeType":"VariableDeclaration","scope":51521,"src":"5871:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51481,"name":"bool","nodeType":"ElementaryTypeName","src":"5871:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"5870:18:43"},"scope":51732,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":51551,"nodeType":"FunctionDefinition","src":"6440:262:43","nodes":[],"body":{"id":51550,"nodeType":"Block","src":"6531:171:43","nodes":[],"statements":[{"assignments":[51533],"declarations":[{"constant":false,"id":51533,"mutability":"mutable","name":"data","nameLocation":"6563:4:43","nodeType":"VariableDeclaration","scope":51550,"src":"6541:26:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"},"typeName":{"id":51532,"nodeType":"UserDefinedTypeName","pathNode":{"id":51531,"name":"SessionKeyData","nameLocations":["6541:14:43"],"nodeType":"IdentifierPath","referencedDeclaration":51090,"src":"6541:14:43"},"referencedDeclaration":51090,"src":"6541:14:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"}},"visibility":"internal"}],"id":51537,"initialValue":{"baseExpression":{"id":51534,"name":"sessionKeyData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51095,"src":"6570:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_SessionKeyData_$51090_storage_$","typeString":"mapping(address => struct SessionKeyValidator.SessionKeyData storage ref)"}},"id":51536,"indexExpression":{"id":51535,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51524,"src":"6585:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6570:19:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage","typeString":"struct SessionKeyValidator.SessionKeyData storage ref"}},"nodeType":"VariableDeclarationStatement","src":"6541:48:43"},{"condition":{"id":51540,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"6603:27:43","subExpression":{"expression":{"id":51538,"name":"data","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51533,"src":"6604:4:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData memory"}},"id":51539,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6609:21:43","memberName":"hasTargetRestrictions","nodeType":"MemberAccess","referencedDeclaration":51089,"src":"6604:26:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51543,"nodeType":"IfStatement","src":"6599:44:43","trueBody":{"expression":{"hexValue":"74727565","id":51541,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"6639:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"functionReturnParameters":51530,"id":51542,"nodeType":"Return","src":"6632:11:43"}},{"expression":{"baseExpression":{"baseExpression":{"id":51544,"name":"targetAllowed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51107,"src":"6669:13:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_address_$_t_bool_$_$","typeString":"mapping(address => mapping(address => bool))"}},"id":51546,"indexExpression":{"id":51545,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51524,"src":"6683:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6669:18:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":51548,"indexExpression":{"id":51547,"name":"target","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51526,"src":"6688:6:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6669:26:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":51530,"id":51549,"nodeType":"Return","src":"6662:33:43"}]},"documentation":{"id":51522,"nodeType":"StructuredDocumentation","src":"6216:219:43","text":" @notice AUDITOR APPROVED: Check if target is allowed (view only)\n @param key Session key address\n @param target Target address to check\n @return allowed Whether the target is allowed"},"functionSelector":"2a2314c1","implemented":true,"kind":"function","modifiers":[],"name":"isTargetAllowed","nameLocation":"6449:15:43","parameters":{"id":51527,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51524,"mutability":"mutable","name":"key","nameLocation":"6473:3:43","nodeType":"VariableDeclaration","scope":51551,"src":"6465:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51523,"name":"address","nodeType":"ElementaryTypeName","src":"6465:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51526,"mutability":"mutable","name":"target","nameLocation":"6486:6:43","nodeType":"VariableDeclaration","scope":51551,"src":"6478:14:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51525,"name":"address","nodeType":"ElementaryTypeName","src":"6478:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"6464:29:43"},"returnParameters":{"id":51530,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51529,"mutability":"mutable","name":"allowed","nameLocation":"6522:7:43","nodeType":"VariableDeclaration","scope":51551,"src":"6517:12:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51528,"name":"bool","nodeType":"ElementaryTypeName","src":"6517:4:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"6516:14:43"},"scope":51732,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":51635,"nodeType":"FunctionDefinition","src":"7125:798:43","nodes":[],"body":{"id":51634,"nodeType":"Block","src":"7218:705:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51566,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51564,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51556,"src":"7236:6:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":51565,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7245:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7236:10:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f20616d6f756e74","id":51567,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"7248:13:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_213de2103ab57dc723846d919aa5c479660e698c1413b0ae66689049b9877064","typeString":"literal_string \"zero amount\""},"value":"zero amount"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_213de2103ab57dc723846d919aa5c479660e698c1413b0ae66689049b9877064","typeString":"literal_string \"zero amount\""}],"id":51563,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"7228:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51568,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7228:34:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51569,"nodeType":"ExpressionStatement","src":"7228:34:43"},{"assignments":[51572],"declarations":[{"constant":false,"id":51572,"mutability":"mutable","name":"data","nameLocation":"7303:4:43","nodeType":"VariableDeclaration","scope":51634,"src":"7281:26:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"},"typeName":{"id":51571,"nodeType":"UserDefinedTypeName","pathNode":{"id":51570,"name":"SessionKeyData","nameLocations":["7281:14:43"],"nodeType":"IdentifierPath","referencedDeclaration":51090,"src":"7281:14:43"},"referencedDeclaration":51090,"src":"7281:14:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"}},"visibility":"internal"}],"id":51576,"initialValue":{"baseExpression":{"id":51573,"name":"sessionKeyData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51095,"src":"7310:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_SessionKeyData_$51090_storage_$","typeString":"mapping(address => struct SessionKeyValidator.SessionKeyData storage ref)"}},"id":51575,"indexExpression":{"id":51574,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51554,"src":"7325:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"7310:19:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage","typeString":"struct SessionKeyValidator.SessionKeyData storage ref"}},"nodeType":"VariableDeclarationStatement","src":"7281:48:43"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51580,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":51577,"name":"data","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51572,"src":"7343:4:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData memory"}},"id":51578,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7348:8:43","memberName":"dailyCap","nodeType":"MemberAccess","referencedDeclaration":51087,"src":"7343:13:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":51579,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7360:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7343:18:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51582,"nodeType":"IfStatement","src":"7339:31:43","trueBody":{"functionReturnParameters":51562,"id":51581,"nodeType":"Return","src":"7363:7:43"}},{"assignments":[51584],"declarations":[{"constant":false,"id":51584,"mutability":"mutable","name":"windowId","nameLocation":"7410:8:43","nodeType":"VariableDeclaration","scope":51634,"src":"7402:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51583,"name":"uint256","nodeType":"ElementaryTypeName","src":"7402:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51588,"initialValue":{"arguments":[{"id":51586,"name":"timestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51558,"src":"7433:9:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint48","typeString":"uint48"}],"id":51585,"name":"getWindowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51472,"src":"7421:11:43","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint48_$returns$_t_uint256_$","typeString":"function (uint48) pure returns (uint256)"}},"id":51587,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7421:22:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7402:41:43"},{"assignments":[51590],"declarations":[{"constant":false,"id":51590,"mutability":"mutable","name":"currentSpent","nameLocation":"7461:12:43","nodeType":"VariableDeclaration","scope":51634,"src":"7453:20:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51589,"name":"uint256","nodeType":"ElementaryTypeName","src":"7453:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51596,"initialValue":{"baseExpression":{"baseExpression":{"id":51591,"name":"windowSpending","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51101,"src":"7476:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_uint256_$_t_uint256_$_$","typeString":"mapping(address => mapping(uint256 => uint256))"}},"id":51593,"indexExpression":{"id":51592,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51554,"src":"7491:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"7476:19:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":51595,"indexExpression":{"id":51594,"name":"windowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51584,"src":"7496:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"7476:29:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7453:52:43"},{"assignments":[51598],"declarations":[{"constant":false,"id":51598,"mutability":"mutable","name":"newSpent","nameLocation":"7523:8:43","nodeType":"VariableDeclaration","scope":51634,"src":"7515:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51597,"name":"uint256","nodeType":"ElementaryTypeName","src":"7515:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51602,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51601,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51599,"name":"currentSpent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51590,"src":"7534:12:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":51600,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51556,"src":"7549:6:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7534:21:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7515:40:43"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51606,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51603,"name":"newSpent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51598,"src":"7634:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"expression":{"id":51604,"name":"data","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51572,"src":"7645:4:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData memory"}},"id":51605,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7650:8:43","memberName":"dailyCap","nodeType":"MemberAccess","referencedDeclaration":51087,"src":"7645:13:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7634:24:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51619,"nodeType":"IfStatement","src":"7630:141:43","trueBody":{"id":51618,"nodeType":"Block","src":"7660:111:43","statements":[{"eventCall":{"arguments":[{"id":51608,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51554,"src":"7691:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51609,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51556,"src":"7696:6:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":51610,"name":"data","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51572,"src":"7704:4:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData memory"}},"id":51611,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7709:8:43","memberName":"dailyCap","nodeType":"MemberAccess","referencedDeclaration":51087,"src":"7704:13:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":51607,"name":"CapExceeded","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51133,"src":"7679:11:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256)"}},"id":51612,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7679:39:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51613,"nodeType":"EmitStatement","src":"7674:44:43"},{"expression":{"arguments":[{"hexValue":"4461696c7920636170206578636565646564","id":51615,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"7739:20:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_ca441806b66e75082fe37981890c718709281b2344d5b14bf5a740f814d2ff52","typeString":"literal_string \"Daily cap exceeded\""},"value":"Daily cap exceeded"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_ca441806b66e75082fe37981890c718709281b2344d5b14bf5a740f814d2ff52","typeString":"literal_string \"Daily cap exceeded\""}],"id":51614,"name":"revert","nodeType":"Identifier","overloadedDeclarations":[-19,-19],"referencedDeclaration":-19,"src":"7732:6:43","typeDescriptions":{"typeIdentifier":"t_function_revert_pure$_t_string_memory_ptr_$returns$__$","typeString":"function (string memory) pure"}},"id":51616,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7732:28:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51617,"nodeType":"ExpressionStatement","src":"7732:28:43"}]}},{"expression":{"id":51626,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"baseExpression":{"id":51620,"name":"windowSpending","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51101,"src":"7827:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_uint256_$_t_uint256_$_$","typeString":"mapping(address => mapping(uint256 => uint256))"}},"id":51623,"indexExpression":{"id":51621,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51554,"src":"7842:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"7827:19:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":51624,"indexExpression":{"id":51622,"name":"windowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51584,"src":"7847:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"7827:29:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51625,"name":"newSpent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51598,"src":"7859:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7827:40:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51627,"nodeType":"ExpressionStatement","src":"7827:40:43"},{"eventCall":{"arguments":[{"id":51629,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51554,"src":"7894:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51630,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51556,"src":"7899:6:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":51631,"name":"newSpent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51598,"src":"7907:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":51628,"name":"CapConsumed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51141,"src":"7882:11:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256)"}},"id":51632,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7882:34:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51633,"nodeType":"EmitStatement","src":"7877:39:43"}]},"documentation":{"id":51552,"nodeType":"StructuredDocumentation","src":"6789:331:43","text":" @notice AUDITOR REQUIRED: Atomic check-and-consume spending cap\n @param key Session key address (explicitly passed from callData)\n @param amount Amount to consume\n @param timestamp Timestamp for window calculation\n @dev Reverts if cap would be exceeded, otherwise atomically updates state"},"functionSelector":"1711080d","implemented":true,"kind":"function","modifiers":[{"id":51561,"kind":"modifierInvocation","modifierName":{"id":51560,"name":"onlyAccount","nameLocations":["7206:11:43"],"nodeType":"IdentifierPath","referencedDeclaration":51179,"src":"7206:11:43"},"nodeType":"ModifierInvocation","src":"7206:11:43"}],"name":"consumeOrRevert","nameLocation":"7134:15:43","parameters":{"id":51559,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51554,"mutability":"mutable","name":"key","nameLocation":"7158:3:43","nodeType":"VariableDeclaration","scope":51635,"src":"7150:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51553,"name":"address","nodeType":"ElementaryTypeName","src":"7150:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51556,"mutability":"mutable","name":"amount","nameLocation":"7171:6:43","nodeType":"VariableDeclaration","scope":51635,"src":"7163:14:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51555,"name":"uint256","nodeType":"ElementaryTypeName","src":"7163:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51558,"mutability":"mutable","name":"timestamp","nameLocation":"7186:9:43","nodeType":"VariableDeclaration","scope":51635,"src":"7179:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":51557,"name":"uint48","nodeType":"ElementaryTypeName","src":"7179:6:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"}],"src":"7149:47:43"},"returnParameters":{"id":51562,"nodeType":"ParameterList","parameters":[],"src":"7218:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51679,"nodeType":"FunctionDefinition","src":"8228:331:43","nodes":[],"body":{"id":51678,"nodeType":"Block","src":"8320:239:43","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51650,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51648,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51640,"src":"8338:6:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":51649,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"8347:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"8338:10:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"7a65726f20616d6f756e74","id":51651,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"8350:13:43","typeDescriptions":{"typeIdentifier":"t_stringliteral_213de2103ab57dc723846d919aa5c479660e698c1413b0ae66689049b9877064","typeString":"literal_string \"zero amount\""},"value":"zero amount"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_213de2103ab57dc723846d919aa5c479660e698c1413b0ae66689049b9877064","typeString":"literal_string \"zero amount\""}],"id":51647,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"8330:7:43","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":51652,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8330:34:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51653,"nodeType":"ExpressionStatement","src":"8330:34:43"},{"assignments":[51655],"declarations":[{"constant":false,"id":51655,"mutability":"mutable","name":"windowId","nameLocation":"8391:8:43","nodeType":"VariableDeclaration","scope":51678,"src":"8383:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51654,"name":"uint256","nodeType":"ElementaryTypeName","src":"8383:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51659,"initialValue":{"arguments":[{"id":51657,"name":"timestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51642,"src":"8414:9:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint48","typeString":"uint48"}],"id":51656,"name":"getWindowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51472,"src":"8402:11:43","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint48_$returns$_t_uint256_$","typeString":"function (uint48) pure returns (uint256)"}},"id":51658,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8402:22:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"8383:41:43"},{"expression":{"id":51666,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"baseExpression":{"id":51660,"name":"windowSpending","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51101,"src":"8434:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_uint256_$_t_uint256_$_$","typeString":"mapping(address => mapping(uint256 => uint256))"}},"id":51663,"indexExpression":{"id":51661,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51638,"src":"8449:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"8434:19:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":51664,"indexExpression":{"id":51662,"name":"windowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51655,"src":"8454:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"8434:29:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":51665,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51640,"src":"8467:6:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8434:39:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51667,"nodeType":"ExpressionStatement","src":"8434:39:43"},{"eventCall":{"arguments":[{"id":51669,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51638,"src":"8509:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":51670,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51640,"src":"8514:6:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"baseExpression":{"baseExpression":{"id":51671,"name":"windowSpending","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51101,"src":"8522:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_uint256_$_t_uint256_$_$","typeString":"mapping(address => mapping(uint256 => uint256))"}},"id":51673,"indexExpression":{"id":51672,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51638,"src":"8537:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"8522:19:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":51675,"indexExpression":{"id":51674,"name":"windowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51655,"src":"8542:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"8522:29:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":51668,"name":"CapConsumed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51141,"src":"8497:11:43","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256)"}},"id":51676,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8497:55:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51677,"nodeType":"EmitStatement","src":"8492:60:43"}]},"documentation":{"id":51636,"nodeType":"StructuredDocumentation","src":"7933:290:43","text":" @notice AUDITOR APPROVED: Record spending (called from SmartAccount after execution)\n @param key Session key that spent\n @param amount Amount spent\n @param timestamp Timestamp for window calculation\n @dev Legacy function for backward compatibility"},"functionSelector":"c63a5d86","implemented":true,"kind":"function","modifiers":[{"id":51645,"kind":"modifierInvocation","modifierName":{"id":51644,"name":"onlyAccount","nameLocations":["8308:11:43"],"nodeType":"IdentifierPath","referencedDeclaration":51179,"src":"8308:11:43"},"nodeType":"ModifierInvocation","src":"8308:11:43"}],"name":"recordSpending","nameLocation":"8237:14:43","parameters":{"id":51643,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51638,"mutability":"mutable","name":"key","nameLocation":"8260:3:43","nodeType":"VariableDeclaration","scope":51679,"src":"8252:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51637,"name":"address","nodeType":"ElementaryTypeName","src":"8252:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51640,"mutability":"mutable","name":"amount","nameLocation":"8273:6:43","nodeType":"VariableDeclaration","scope":51679,"src":"8265:14:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51639,"name":"uint256","nodeType":"ElementaryTypeName","src":"8265:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51642,"mutability":"mutable","name":"timestamp","nameLocation":"8288:9:43","nodeType":"VariableDeclaration","scope":51679,"src":"8281:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":51641,"name":"uint48","nodeType":"ElementaryTypeName","src":"8281:6:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"}],"src":"8251:47:43"},"returnParameters":{"id":51646,"nodeType":"ParameterList","parameters":[],"src":"8320:0:43"},"scope":51732,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51731,"nodeType":"FunctionDefinition","src":"8928:419:43","nodes":[],"body":{"id":51730,"nodeType":"Block","src":"9086:261:43","nodes":[],"statements":[{"assignments":[51695],"declarations":[{"constant":false,"id":51695,"mutability":"mutable","name":"data","nameLocation":"9118:4:43","nodeType":"VariableDeclaration","scope":51730,"src":"9096:26:43","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"},"typeName":{"id":51694,"nodeType":"UserDefinedTypeName","pathNode":{"id":51693,"name":"SessionKeyData","nameLocations":["9096:14:43"],"nodeType":"IdentifierPath","referencedDeclaration":51090,"src":"9096:14:43"},"referencedDeclaration":51090,"src":"9096:14:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage_ptr","typeString":"struct SessionKeyValidator.SessionKeyData"}},"visibility":"internal"}],"id":51699,"initialValue":{"baseExpression":{"id":51696,"name":"sessionKeyData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51095,"src":"9125:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_struct$_SessionKeyData_$51090_storage_$","typeString":"mapping(address => struct SessionKeyValidator.SessionKeyData storage ref)"}},"id":51698,"indexExpression":{"id":51697,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51682,"src":"9140:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"9125:19:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_storage","typeString":"struct SessionKeyValidator.SessionKeyData storage ref"}},"nodeType":"VariableDeclarationStatement","src":"9096:48:43"},{"expression":{"id":51703,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51700,"name":"cap","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51687,"src":"9154:3:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":51701,"name":"data","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51695,"src":"9160:4:43","typeDescriptions":{"typeIdentifier":"t_struct$_SessionKeyData_$51090_memory_ptr","typeString":"struct SessionKeyValidator.SessionKeyData memory"}},"id":51702,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"9165:8:43","memberName":"dailyCap","nodeType":"MemberAccess","referencedDeclaration":51087,"src":"9160:13:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9154:19:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51704,"nodeType":"ExpressionStatement","src":"9154:19:43"},{"assignments":[51706],"declarations":[{"constant":false,"id":51706,"mutability":"mutable","name":"windowId","nameLocation":"9200:8:43","nodeType":"VariableDeclaration","scope":51730,"src":"9192:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51705,"name":"uint256","nodeType":"ElementaryTypeName","src":"9192:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51710,"initialValue":{"arguments":[{"id":51708,"name":"timestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51684,"src":"9223:9:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint48","typeString":"uint48"}],"id":51707,"name":"getWindowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51472,"src":"9211:11:43","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint48_$returns$_t_uint256_$","typeString":"function (uint48) pure returns (uint256)"}},"id":51709,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9211:22:43","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9192:41:43"},{"expression":{"id":51717,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51711,"name":"spent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51689,"src":"9243:5:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"baseExpression":{"baseExpression":{"id":51712,"name":"windowSpending","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51101,"src":"9251:14:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_uint256_$_t_uint256_$_$","typeString":"mapping(address => mapping(uint256 => uint256))"}},"id":51714,"indexExpression":{"id":51713,"name":"key","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51682,"src":"9266:3:43","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"9251:19:43","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":51716,"indexExpression":{"id":51715,"name":"windowId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51706,"src":"9271:8:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"9251:29:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9243:37:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51718,"nodeType":"ExpressionStatement","src":"9243:37:43"},{"expression":{"id":51728,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51719,"name":"remaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51691,"src":"9299:9:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51722,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51720,"name":"cap","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51687,"src":"9311:3:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":51721,"name":"spent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51689,"src":"9317:5:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9311:11:43","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"hexValue":"30","id":51726,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9339:1:43","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"id":51727,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"9311:29:43","trueExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51725,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51723,"name":"cap","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51687,"src":"9325:3:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":51724,"name":"spent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51689,"src":"9331:5:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9325:11:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9299:41:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51729,"nodeType":"ExpressionStatement","src":"9299:41:43"}]},"documentation":{"id":51680,"nodeType":"StructuredDocumentation","src":"8622:301:43","text":" @notice Get spending status for a session key\n @param key Session key address\n @param timestamp Timestamp for window calculation\n @return cap Daily spending cap\n @return spent Amount spent in current window\n @return remaining Amount remaining in window"},"functionSelector":"eb038861","implemented":true,"kind":"function","modifiers":[],"name":"getSpendingStatus","nameLocation":"8937:17:43","parameters":{"id":51685,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51682,"mutability":"mutable","name":"key","nameLocation":"8963:3:43","nodeType":"VariableDeclaration","scope":51731,"src":"8955:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51681,"name":"address","nodeType":"ElementaryTypeName","src":"8955:7:43","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":51684,"mutability":"mutable","name":"timestamp","nameLocation":"8975:9:43","nodeType":"VariableDeclaration","scope":51731,"src":"8968:16:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":51683,"name":"uint48","nodeType":"ElementaryTypeName","src":"8968:6:43","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"}],"src":"8954:31:43"},"returnParameters":{"id":51692,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51687,"mutability":"mutable","name":"cap","nameLocation":"9026:3:43","nodeType":"VariableDeclaration","scope":51731,"src":"9018:11:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51686,"name":"uint256","nodeType":"ElementaryTypeName","src":"9018:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51689,"mutability":"mutable","name":"spent","nameLocation":"9047:5:43","nodeType":"VariableDeclaration","scope":51731,"src":"9039:13:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51688,"name":"uint256","nodeType":"ElementaryTypeName","src":"9039:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51691,"mutability":"mutable","name":"remaining","nameLocation":"9070:9:43","nodeType":"VariableDeclaration","scope":51731,"src":"9062:17:43","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51690,"name":"uint256","nodeType":"ElementaryTypeName","src":"9062:7:43","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9008:77:43"},"scope":51732,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[{"baseName":{"id":51066,"name":"ISignatureValidator","nameLocations":["326:19:43"],"nodeType":"IdentifierPath","referencedDeclaration":51057,"src":"326:19:43"},"id":51067,"nodeType":"InheritanceSpecifier","src":"326:19:43"}],"canonicalName":"SessionKeyValidator","contractDependencies":[],"contractKind":"contract","fullyImplemented":true,"linearizedBaseContracts":[51732,51057],"name":"SessionKeyValidator","nameLocation":"303:19:43","scope":51733,"usedErrors":[],"usedEvents":[51113,51117,51125,51133,51141,51147,51153,51161,51167]}],"license":"MIT"},"id":43}